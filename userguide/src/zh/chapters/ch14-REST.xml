<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "../../../target/docbook-tool-1.0/docbook-xml/docbookx.dtd">

<chapter>

  <title>REST API</title>
  <section>
    <title>通用Activiti REST原则</title>
    <section>
      <title>安装与认证</title>

      <para>activiti包含了一个activiti引擎的REST API，把activiti-rest.war部署到像Apache Tomcat这样的servlet容器就可以使用。
	  不过，它也可以使用在其他web应用中，把activiti-rest的依赖都加入classpath，添加servlet，并映射到你的应用中。</para>
      <para>默认情况下，activiti引擎会连接内存数据库H2。你可以修改WEB-INF/classes目录下的db.properties来修改数据库设置。REST API使用JSON格式
	  （http://www.json.org），它是基于Restlet（http://www.restlet.org）开发的。</para>
      <para>默认所有REST资源都需要先使用有效的activiti用户认证后才能使用。会使用Basic HTTP认证，所以你要一直在请求的HTTP头中包含一个
	  <literal>Authorization: Basic ...==</literal>属性，或在请求url中包含用户名和密码（比如： <literal>http://username:password@localhost...</literal>）。
      </para>
      <para><emphasis role="bold">建议把Basic认证与HTTPS一起使用。</emphasis></para>
      <para>可以从删除对应资源的认证，或添加额外的授权给一个认证的用户
	  （比如，把用户加入一个组，让它可以执行URL Y）。
	  可以使用<literal>org.activiti.rest.filter.RestAuthenticator</literal>的实现，它有两个方法：
      <itemizedlist>
        <listitem><para><emphasis><literal>boolean requestRequiresAuthentication(Request request)</literal></emphasis>：在请求认证检查之前调用
		（通过头部传递合法的账号和密码）。如果方法返回true，这个方法就需要认证才能访问。如果返回false，无论请求是否认证都可以访问。
		如果返回false，就不会为这个方法调用<literal>isRequestAuthorized</literal>。</para></listitem>
        <listitem><para><emphasis><literal>boolean isRequestAuthorized(Request request)</literal></emphasis>：在用户已经通过activiti账号管理认证后，但是再请求实际之前调用。可以用来检查认证用户是否可以访问对应请求。如果返回true，会允许请求执行。如果返回true，请求不会执行，客户端会收到对应的错误。</para></listitem>
      </itemizedlist>
      </para>
      <para>自定义的RestAuthenticator应该设置到RestletServlet的<literal>org.activiti.rest.application.ActivitiRestServicesApplication</literal>中。
	  最简单的方法是创建<literal>ActivitiRestServicesApplication</literal>的子类，并在servlet-mapping中设置自定义的类名：</para>

      <programlisting>
<![CDATA[   <!-- Restlet adapter -->
  <servlet>
    <servlet-name>RestletServlet</servlet-name>
    <servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
    <init-param>
      <!-- Application class name -->
      <param-name>org.restlet.application</param-name>
      <param-value>com.my.company.CustomActivitiRestServicesApplication</param-value>
    </init-param>
  </servlet>]]></programlisting>
    </section>

     <section id="restUsageInTomcat">
      <title>使用Tomcat</title>
      <para>根据<ulink url="http://tomcat.apache.org/tomcat-7.0-doc/security-howto.html">Tomcat的默认安全配置</ulink>，默认<emphasis role="bold">转码的前斜线（<literal>%2F</literal>和<literal>%5C</literal>）都不允许使用（返回400）。</emphasis>
      这可能对部署资源和它们的数据URL造成影响，URL可能会包含转移的前斜线。

      <emphasis role="bold">当出现预期外的400问题，设置下面这个系统参数：<literal>-Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true.</literal></emphasis></para>
    </section>

     <section>
      <title>方法和返回值</title>
      <table>
        <title>HTTP方法和对应操作</title>
        <tgroup cols="2">
          <thead>
            <row>
              <entry>方法</entry>
              <entry>操作</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><literal>GET</literal></entry>
              <entry>获得一个资源或或获得多个资源</entry>
            </row>
            <row>
              <entry><literal>POST</literal></entry>
              <entry>创建一个新资源。当请求结果太复杂，无法放到GET请求的URL中，也用来查询资源。</entry>
            </row>
            <row>
              <entry><literal>PUT</literal></entry>
              <entry>更新已有资源的属性。也用来调用现存资源的功能。</entry>
            </row>
            <row>
              <entry><literal>DELETE</literal></entry>
              <entry>删除现存资源。</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <table>
        <title>HTTP方法响应代码</title>
        <tgroup cols="2">
          <thead>
            <row>
              <entry>响应</entry>
              <entry>描述</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><literal>200 - Ok</literal></entry>
              <entry>操作成功，响应返回（<literal>GET</literal>和<literal>PUT</literal>请求）。</entry>
            </row>
            <row>
              <entry><literal>201 - Created</literal></entry>
              <entry>操作成功，实体已创建，并返回到响应体中（<literal>POST</literal>请求）。</entry>
            </row>
            <row>
              <entry><literal>204 - No content</literal></entry>
              <entry>操作成功，实体已删除，不会返回响应体（<literal>DELETE</literal>请求）。</entry>
            </row>
            <row>
              <entry><literal>401 - Unauthorized</literal></entry>
              <entry>操作失败。操作要求设置Authentication头部。如果请求中已经设置了头部，对应的凭证是无效的或者用户不允许执行这个操作。</entry>
            </row>
            <row>
              <entry><literal>403 - Forbidden</literal></entry>
              <entry>禁止操作，不要重试。这不是认证和授权的问题，这是禁止操作。比如：删除一个执行中流程的任务是不允许的，无论用户或流程任务的状态。</entry>
            </row>
            <row>
              <entry><literal>404 - Not found</literal></entry>
              <entry>操作失败。找不到请求的资源。</entry>
            </row>
            <row>
              <entry><literal>405 - Method not allowed</literal></entry>
              <entry>操作失败。使用的资源方法不允许调用。比如：想更新（PUT）已部署的资源会返回<literal>405</literal>结果。</entry>
            </row>
            <row>
              <entry><literal>409 - Conflict</literal></entry>
              <entry>操作失败。更新其他操作应更新的资源，会导致更新不合法。也可以表示一个结合中新创建的资源的id已经存在了。</entry>
            </row>
            <row>
              <entry><literal>415 - Unsupported Media Type</literal></entry>
              <entry>操作失败。请求体包含了不支持的媒体类型。当请求体的JSON中包含未知的属性或值时，也会返回这个响应，一般是因为无法处理的错误格式或类型。</entry>
            </row>
            <row>
              <entry><literal>500 - Internal server error</literal></entry>
              <entry>操作失败。执行操作时出现了预期外的异常。响应体中包含错误的细节。</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
        <para>
		media-type和HTTP响应永远都是<literal>application/json</literal>，除非需要使用二进制内容（比如：发布资源数据），会使用内容的media-type。
        </para>
    </section>
    <section>
      <title>错误响应体</title>
      <para>当发生错误时（包括客户端和服务端，4XX和5XX状态码），响应体会包含描述发生的错误的描述。
	  下面是任务不存在时出现的404状态：</para>
                  <programlisting>
{
  "statusCode" : 404,
  "errorMessage" : "Could not find a task with id '444'."
}</programlisting>
    </section>
    <section>
      <title>请求参数</title>
      <section>
        <title>URL片段</title>
        <para>
			url上的参数（比如<literal>http://host/actviti-rest/service/repository/deployments/{deploymentId}</literal>上的deploymentId）
			都需要转义（参考<ulink url="https://en.wikipedia.org/wiki/Percent-encoding">URL编码或百分号编码</ulink>来解决特殊字符问题）。
			大多数框架都有这种内置功能，但我们也要把这个问题考虑在内。特别是对于可能包含前斜线（比如，部署资源）的情况，这就是必须的。
        </para>
      </section>

      <section>
        <title>Rest URL查询参数</title>
        <para>
			设置在URL中的查询参数（比如，<literal>http://host/activiti-rest/service/deployments?name=Deployment</literal>中的name参数）
			可以使用以下类型，它们对应着以下REST-API文档：

            <table>
              <title>URL查询参数类型</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>类型</entry>
                    <entry>格式</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>String</entry>
                    <entry>纯文本参数。可以包含任何URL允许的合法的字符。对于<literal>XXXLike</literal>参数，字符串应该包含通配符<literal>%</literal>（还要通过url编码）。这可以指定模糊搜索的意图。比如'<literal>Tas%</literal>'匹配所有以'Tas'开头的值。</entry>
                  </row>
                  <row>
                    <entry>Integer</entry>
                    <entry>整数参数。只能包含非小数的整数值，在-2.147.483.648与2.147.483.647之间。</entry>
                  </row>
                  <row>
                    <entry>Long</entry>
                    <entry>长整形参数。只能包含非小树的长整形值，在-9.223.372.036.854.775.808与9.223.372.036.854.775.807之间。</entry>
                  </row>
                  <row>
                    <entry>Boolean</entry>
                    <entry>布尔类型参数。可以是<literal>true</literal>或<literal>false</literal>。如果使用了其他值，会返回'<literal>405 - Bad request</literal>'响应。</entry>
                  </row>
                  <row>
                    <entry>Date</entry>
                    <entry>日期类型。使用ISO-8601日期格式（参考<ulink url="http://en.wikipedia.org/wiki/ISO_8601">维基百科上的ISO-8601</ulink>），
					用于时间和日期组件（比如<literal>2013-04-03T23:45Z</literal>）。</entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
        </para>
      </section>
      <section id="restJsonBody">
        <title>JSON内容参数</title>
        <para>
            <table>
              <title>JSON参数类型</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>类型</entry>
                    <entry>格式</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>String</entry>
                    <entry>纯文本参数。可以包含任何URL允许的合法的字符。对于<literal>XXXLike</literal>参数，字符串应该包含通配符<literal>%</literal>（还要通过url编码）。这可以指定模糊搜索的意图。比如'<literal>Tas%</literal>'匹配所有以'Tas'开头的值。</entry>
                  </row>
                  <row>
                    <entry>Integer</entry>
                    <entry>整数参数，JSON数字。只能包含非小数的整数值，在-2.147.483.648与2.147.483.647之间。</entry>
                  </row>
                  <row>
                    <entry>Long</entry>
                    <entry>长整形参数，JSON数字。只能包含非小树的长整形值，在-9.223.372.036.854.775.808与9.223.372.036.854.775.807之间。</entry>
                  </row>
                  <row>
                    <entry>Boolean</entry>
                    <entry>布尔类型参数，JSON布尔。可以是<literal>true</literal>或<literal>false</literal>。如果使用了其他值，会返回'<literal>405 - Bad request</literal>'响应。</entry>
                  </row>
                  <row>
                    <entry>Date</entry>
                    <entry>日期类型，JSON文本。使用ISO-8601日期格式（参考<ulink url="http://en.wikipedia.org/wiki/ISO_8601">维基百科上的ISO-8601</ulink>），
					用于时间和日期组件（比如<literal>2013-04-03T23:45Z</literal>）。</entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
        </para>
      </section>
      <section id="restPagingAndSort">
        <title>分页与排序</title>
        <para>
			分页与排序参数可以添加到URL的query-string中（比如<literal>http://host/activiti-rest/service/deployments?sort=name</literal>中的name参数）。
            <table>
              <title>查询JSON参数</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>默认值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>sort</entry>
                    <entry>根据查询实现而不同</entry>
                    <entry>查询的名称，对于不同的查询实现，默认值也不同。</entry>
                  </row>
                  <row>
                    <entry>order</entry>
                    <entry>asc</entry>
                    <entry>排序的方式，可以为'asc'或'desc'。</entry>
                  </row>
                  <row>
                    <entry>start</entry>
                    <entry>0</entry>
                    <entry>分页查询开始的值，默认从0开始。</entry>
                  </row>
                  <row>
                    <entry>size</entry>
                    <entry>10</entry>
                    <entry>分页查询每页显示的记录数。默认为10。</entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
        </para>
      </section>

      <section id="restQueryVariable">
        <title>JSON查询变量格式</title>
        <para>
            <programlisting>
{
  "name" : "variableName",
  "value" : "variableValue",
  "operator" : "equals",
  "type" : "string"
}</programlisting>
            <table>
              <title>查询JSON参数</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>name</entry>
                    <entry>否</entry>
                    <entry>查询包含的变量名称。在一些查询中使用'<literal>equals</literal>'查询对应资源的<emphasis role="bold">所有值</emphasis>时，可以为空。</entry>
                  </row>
                  <row>
                    <entry>value</entry>
                    <entry>是</entry>
                    <entry>查询包含的变量值，要包含给定类型的正确格式。</entry>
                  </row>
                  <row>
                    <entry>operator</entry>
                    <entry>是</entry>
                    <entry>查询使用的参数，可以是以下值： <literal>equals, notEquals, equalsIgnoreCase, notEqualsIgnoreCase, lessThan, greaterThan, lessThanOrEquals, greaterThanOrEquals</literal>和<literal>like</literal>。</entry>
                  </row>
                  <row>
                    <entry>type</entry>
                    <entry>否</entry>
                    <entry>使用的变量的类型。如果省略，类型会根据<literal>value</literal>参数决定。所以JSON文本值都会认为是<literal>string</literal>类型，JSON布尔对应<literal>boolean</literal>，JSON数字根据数字的长度对应<literal>long</literal>或<literal>integer</literal>。在不确定时，建议使用精确的类型。下面列出了不稳定支持的其他类型。
                    </entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
             <table>
              <title>默认查询JSON类型</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>类型名称</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>string</entry>
                    <entry>对应<literal>java.lang.String</literal>.</entry>
                  </row>
                  <row>
                    <entry>short</entry>
                    <entry>对应<literal>java.lang.Integer</literal>.</entry>
                  </row>
                  <row>
                    <entry>integer</entry>
                    <entry>对应<literal>java.lang.Integer</literal>.</entry>
                  </row>
                  <row>
                    <entry>long</entry>
                    <entry>对应<literal>java.lang.Long</literal>.</entry>
                  </row>
                  <row>
                    <entry>double</entry>
                    <entry>对应<literal>java.lang.Double</literal>.</entry>
                  </row>
                  <row>
                    <entry>boolean</entry>
                    <entry>对应<literal>java.lang.Boolean</literal>.</entry>
                  </row>
                  <row>
                    <entry>date</entry>
                    <entry>对应<literal>java.util.Date</literal>。JSON字符串会使用ISO-8601格式进行转换。</entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
        </para>
      </section>

      <section id="restVariables">
        <title>变量格式</title>
        <para>
		  在使用变量时（执行，流程和任务），REST-api使用一些通用原则和JSON格式实现读写。
		  变量的JSON格式看起来如下所示：
           <programlisting>
{
  "name" : "variableName",
  "value" : "variableValue",
  "valueUrl" : "http://...",
  "scope" : "local",
  "type" : "string"
}</programlisting>

           <table>
              <title>变量JSON属性</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>name</entry>
                    <entry>是</entry>
                    <entry>变量名称。</entry>
                  </row>
                  <row>
                    <entry>value</entry>
                    <entry>否</entry>
                    <entry>变量值。写入变量时，如果没有设置<literal>value</literal>，会认为值是<literal>null</literal>。</entry>
                  </row>
                  <row>
                    <entry>valueUrl</entry>
                    <entry>否</entry>
                    <entry>当读取变量的类型为<literal>binary</literal>或<literal>serializable</literal>时，这个属性会指向获取原始二进制数据的URL。</entry>
                  </row>
                  <row>
                    <entry>scope</entry>
                    <entry>否</entry>
                    <entry>变量的范围。如果为'<literal>local</literal>'，变量会对应到请求的资源。如果为'<literal>global</literal>'，变量会定义到请求资源的上级（或上级树的任何上级）。当写入变量，没有设置scope时，假设使用<literal>global</literal>。</entry>
                  </row>
                  <row>
                    <entry>type</entry>
                    <entry>否</entry>
                    <entry>变量类型。参考下面的表格对类型的描述。当写入变量，没有设置类型时，会根据请求的JSON属性来推断它的类型，限制为<literal>string</literal>，<literal>double</literal>，<literal>integer</literal>和<literal>boolean</literal>。如果不确定会用到的类型，建议还是要设置一个类型。</entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
            <table>
              <title>变量类型</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>类型名</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>string</entry>
                    <entry>对应<literal>java.lang.String</literal>。写入时使用JSON文本。</entry>
                  </row>
                  <row>
                    <entry>integer</entry>
                    <entry>对应<literal>java.lang.Integer</literal>。写入时，先使用JSON数进行字转换，如果失败就使用JSON文本。</entry>
                  </row>
                  <row>
                    <entry>short</entry>
                    <entry>对应<literal>java.lang.Short</literal>。写入时，先使用JSON数字进行转换，如果失败就使用JSON文本。</entry>
                  </row>
                  <row>
                    <entry>long</entry>
                    <entry>对应<literal>java.lang.Long</literal>。写入时，先使用JSON数字进行转换，如果失败就使用JSON文本。</entry>
                  </row>
                  <row>
                    <entry>double</entry>
                    <entry>对应<literal>java.lang.Double</literal>。写入时，先使用JSON数字进行转换，如果失败就使用JSON文本。</entry>
                  </row>
                  <row>
                    <entry>boolean</entry>
                    <entry>对应<literal>java.lang.Boolean</literal>。写入时，使用JSON布尔进行转换。</entry>
                  </row>
                  <row>
                    <entry>date</entry>
                    <entry>对应<literal>java.util.Date</literal>。写入时，使用ISO-8601日期格式转换为JSON文本。</entry>
                  </row>
                  <row>
                    <entry>binary</entry>
                    <entry>二进制变量，对应字节数组。<literal>value</literal>属性为null，<literal>valueUrl</literal>包含指向原始二进制流的URL。</entry>
                  </row>
                  <row>
                    <entry>serializable</entry>
                    <entry>可序列化的Java对象序列化后的结果。和<literal>binary</literal>类型相同，<literal>value</literal>属性为null，<literal>valueUrl</literal>包含指向原始二进制流的URL。所有可以序列化变量（上面不包含的类型）都会使用这个类型。</entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
			可以通过自定义JSON格式来支持更多变量类型（无论是简单数值或复杂/内嵌JSON对象）。
			扩展<literal>org.activiti.rest.api.RestResponseFactory</literal>的<literal>initializeVariableConverters()</literal>方法，
			你可以添加自定义的<literal>org.activiti.rest.api.engine.variable.RestVariableConverter</literal>类来支持POJO与对应REST数据的相互转换。实际的JSON转换是通过Jackson实现的。
        </para>
       </section>
    </section>

  </section>
  <section>
    <title>部署</title>
    <para><emphasis role="bold">如果使用tomcat，请参考<link linkend="restUsageInTomcat">tomcat用法</link>。</emphasis></para>
     <section>
      <title>部署列表</title>
        <para>
          <programlisting>GET repository/deployments</programlisting>
        </para>
        <para>
            <table>
              <title>URL查询参数</title>
              <tgroup cols='3'>
                <colspec colname="c1"/>
                <colspec colname="c2"/>
                <colspec colname="c3"/>
                <colspec colname="c4"/>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>name</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定名称的部署。</entry>
                  </row>
                  <row>
                    <entry>nameLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回名称与指定值相似的部署。</entry>
                  </row>
                  <row>
                    <entry>category</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定分类的部署。</entry>
                  </row>
                  <row>
                    <entry>categoryNotEquals</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定分类不同的部署。</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>否</entry>
                    <entry>'id'（默认），'name'或'deploytime'</entry>
                    <entry>排序属性，与'order'一起使用。</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c4"><para>通用的<link linkend="restPagingAndSort">分页和排序查询参数</link>都可以使用。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>REST响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "data": [
    {
      "id": "10",
      "name": "activiti-examples.bar",
      "deploymentTime": "2010-10-13T14:54:26.750+02:00",
      "category": "examples",
      "url": "http://localhost:8081/service/repository/deployments/10"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
    </para>
    </section>

    <section>
      <title>获得一个部署</title>
        <para>
          <programlisting>GET repository/deployments/{deploymentId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得一个部署 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取部署的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得一个部署 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了部署，并返回。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的部署。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id": "10",
  "name": "activiti-examples.bar",
  "deploymentTime": "2010-10-13T14:54:26.750+02:00",
  "category": "examples",
  "url": "http://localhost:8081/service/repository/deployments/10"
}</programlisting>
    </para>
    </section>

    <section>
      <title>创建新部署</title>
        <para>
          <programlisting>POST repository/deployments</programlisting>
        </para>
        <para>
          <emphasis role="bold">请求体：</emphasis>
        </para>
        <para>请求体包含的数据类型应该是<emphasis>multipart/form-data</emphasis>。请求里应该只包含一个文件，其他额外的任务都会被忽略。
		部署的名称就是文件域的名称。如果需要在一个部署中包含多个资源，把这些文件压缩成zip包，并要确认文件名是以<literal>.bar</literal>或<literal>.zip</literal>结尾。</para>
        <para>
          <table>
              <title>创建新部署 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示部署已经创建了。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示请求内没有内容，或部署不支持内容的mime-type。在状态描述中包含更新信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id": "10",
  "name": "activiti-examples.bar",
  "deploymentTime": "2010-10-13T14:54:26.750+02:00",
  "category": null,
  "url": "http://localhost:8081/service/repository/deployments/10"
}</programlisting>
    </para>
  </section>
      <section>
      <title>删除部署</title>
        <para>
          <programlisting>DELETE repository/deployments/{deploymentId}</programlisting>
        </para>
        <para>
            <table>
              <title>删除部署 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>删除的部署id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>删除部署 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了部署并已经删除。响应体为空。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示没有找到请求的部署。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>列出部署内的资源</title>
        <para>
          <programlisting>GET repository/deployments/{deploymentId}/resources</programlisting>
        </para>
        <para>
            <table>
              <title>列出部署内的资源 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取资源的部署id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>列出部署内的资源 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了部署，并返回了资源列表。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的部署。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "id": "diagrams/my-process.bpmn20.xml",
    "url": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resources/diagrams%2Fmy-process.bpmn20.xml",
    "dataUrl": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resourcedata/diagrams%2Fmy-process.bpmn20.xml",
    "mediaType": "text/xml",
    "type": "processDefinition"
  },
  {
    "id": "image.png",
    "url": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resources/image.png",
    "dataUrl": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resourcedata/image.png",
    "mediaType": "image/png",
    "type": "resource"
  }
]</programlisting>

       <itemizedlist>
        <listitem>
          <para><literal>mediaType</literal>：包含资源的media-type。这是使用（可插拔的）<literal>MediaTypeResolver</literal>处理的，默认已经支持了一些有限的mime-type映射。</para>
        </listitem>
         <listitem>
          <para><literal>type</literal>：资源类型，可能值为：</para>
           <itemizedlist>
            <listitem>
              <para><literal>resource</literal>：原始资源。</para>
            </listitem>
             <listitem>
              <para><literal>processDefinition</literal>：包含一个或多个流程定义的资源。它会被发布器处理。</para>
            </listitem>
             <listitem>
              <para><literal>processImage</literal>：展示一个已发布流程定义的图形布局。</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>
    </para>
    <para>
      <emphasis>结果json中的dataUrl属性包含了用来获取二进制资源的真实URL。</emphasis>
    </para>
  </section>
  <section>
      <title>获取部署资源</title>
        <para>
          <programlisting>GET repository/deployments/{deploymentId}/resources/{resourceId}</programlisting>
        </para>
        <para>
            <table>
              <title>获取部署资源 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>部署ID是请求资源的一部分。</entry>
                  </row>
                   <row>
                    <entry>resourceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取资源的ID <emphasis role="bold">确保URL对资源ID进行编码的情况下，包含斜杠，例如：使用'diagrams%2Fmy-process.bpmn20.xml' 代替 'diagrams/Fmy-process.bpmn20.xml'。</emphasis></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取部署资源 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示部署和资源都已经找到并且部署的资源已经成功返回。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示请求的部署并没有找到或者目前的部署对象并没有该资源ID。状态描述还包含一些额外信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id": "diagrams/my-process.bpmn20.xml",
  "url": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resources/diagrams%2Fmy-process.bpmn20.xml",
  "dataUrl": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resourcedata/diagrams%2Fmy-process.bpmn20.xml",
  "mediaType": "text/xml",
  "type": "processDefinition"
}</programlisting>

      <itemizedlist>
        <listitem>
		  <para><literal>mediaType</literal>：包含资源的media-type。这是使用（可插拔的）<literal>MediaTypeResolver</literal>处理的，默认已经支持了一些有限的mime-type映射。</para>
        </listitem>
         <listitem>
          <para><literal>type</literal>: 资源类型，可能的值</para>
           <itemizedlist>
            <listitem>
              <para><literal>resource</literal>: 原始资源.</para>
            </listitem>
             <listitem>
              <para><literal>processDefinition</literal>: 包含一个或多个流程定义的资源。它会被发布器处理。</para>
            </listitem>
             <listitem>
              <para><literal>processImage</literal>: 展示一个已发布流程定义的图形布局。</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>
    </para>
  </section>

   <section>
      <title>获取部署资源的内容</title>
        <para>
          <programlisting>GET repository/deployments/{deploymentId}/resourcedata/{resourceId}</programlisting>
        </para>
        <para>
            <table>
              <title>获取部署资源的内容 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>部署ID是请求资源的一部分。</entry>
                  </row>
                   <row>
                    <entry>resourceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>资源ID获取数据 <emphasis role="bold">确保URL对资源ID进行编码的情况下，包含斜杠，例如：使用'diagrams%2Fmy-process.bpmn20.xml' 代替 'diagrams/Fmy-process.bpmn20.xml'</emphasis></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取部署资源的内容 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示部署和资源都已经找到并且部署的资源已经成功返回。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示请求的部署并没有找到或者目前的部署对象并没有该资源ID。状态描述还包含一些额外信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
    </para>
    <para>根据请求的资源响应体将包含二进制的资源内容。响应体的content-type的'mimeType'属性将会和资源的返回类型相同。同样，响应头设置content-disposition，允许浏览器下载该文件而不是去显示它。
    </para>
  </section>
 </section>
 <section>

  <title>流程定义</title>

   <section>
      <title>流程定义列表</title>
        <para>
          <programlisting>GET repository/process-definitions</programlisting>
        </para>
        <para>
            <table>
              <title>流程定义列表 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>version</entry>
                    <entry>否</entry>
                    <entry>integer</entry>
                    <entry>只返回给定版本的流程定义。</entry>
                  </row>
                  <row>
                    <entry>name</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回给定名称的流程定义。</entry>
                  </row>
                  <row>
                    <entry>nameLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与给定名称匹配的流程定义。</entry>
                  </row>
                  <row>
                    <entry>key</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回给定key的流程定义。</entry>
                  </row>
                  <row>
                    <entry>keyLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与给定key匹配的流程定义。</entry>
                  </row>
                  <row>
                    <entry>resourceName</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回给定资源名称的流程定义。</entry>
                  </row>
                  <row>
                    <entry>resourceNameLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与给定资源名称匹配的流程定义。</entry>
                  </row>
                  <row>
                    <entry>category</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回给定分类的流程定义。</entry>
                  </row>
                  <row>
                    <entry>categoryLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与给定分类匹配的流程定义。</entry>
                  </row>
                  <row>
                    <entry>categoryNotEquals</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回非给定分类的流程定义。</entry>
                  </row>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回包含在与给定id一致的部署中的流程定义。</entry>
                  </row>
                  <row>
                    <entry>startableByUser</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回给定用户可以启动的流程定义。</entry>
                  </row>
                  <row>
                    <entry>latest</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>只返回最新的流程定义版本。只能与'key'或'keyLike'参数一起使用，如果使用了其他参数会返回400的响应。</entry>
                  </row>
                  <row>
                    <entry>suspended</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为<literal>true</literal>，只返回挂起的流程定义。如果为<literal>false</literal>，只返回活动的（未挂起）的流程定义。</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>否</entry>
                    <entry>'name'（默认），'id'，'key'，'category'，'deploymentId'和'version'</entry>
                    <entry>排序的属性，可以与'order'一起使用。</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c4"><para>也可以使用通用的<link linkend="restPagingAndSort">分页与排序查询参数</link>。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>流程定义列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，流程定义已返回。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递的参数格式错误，或'latest'与'key'，'keyLike'之外的其他参数一起使用了。状态信息包含更多信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "data": [
    {
      "id" : "oneTaskProcess:1:4",
      "url" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "version" : 1,
      "key" : "oneTaskProcess",
      "category" : "Examples",
      "suspended" : false,
      "name" : "The One Task Process",
      "description" : "This is a process for testing purposes",
      "deploymentId" : "2",
      "deploymentUrl" : "http://localhost:8081/repository/deployments/2",
      "graphicalNotationDefined" : true,
      "resource" : "http://localhost:8182/repository/deployments/2/resources/testProcess.xml",
      "diagramResource" : "http://localhost:8182/repository/deployments/2/resources/testProcess.png",
      "startFormDefined" : false
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      <itemizedlist>
          <listitem>
            <para><literal>graphicalNotationDefined</literal>：表示流程定义包含图形信息（BPMN DI）。</para>
          </listitem>
          <listitem>
            <para><literal>resource</literal>：包含实际部署的BPMN 2.0 xml。</para>
          </listitem>
          <listitem>
            <para><literal>diagramResource</literal>：包含流程的图形内容，如果没有图形就返回null。</para>
          </listitem>
      </itemizedlist>
    </para>
    </section>
   <section>
      <title>获得一个流程定义</title>
        <para>
          <programlisting>GET repository/process-definitions/{processDefinitionId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得一个流程定义 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望获取的流程定义的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得一个流程定义 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程定义，并返回了结果。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程定义。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id" : "oneTaskProcess:1:4",
  "url" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
  "version" : 1,
  "key" : "oneTaskProcess",
  "category" : "Examples",
  "suspended" : false,
  "name" : "The One Task Process",
  "description" : "This is a process for testing purposes",
  "deploymentId" : "2",
  "deploymentUrl" : "http://localhost:8081/repository/deployments/2",
  "graphicalNotationDefined" : true,
  "resource" : "http://localhost:8182/repository/deployments/2/resources/testProcess.xml",
  "diagramResource" : "http://localhost:8182/repository/deployments/2/resources/testProcess.png",
  "startFormDefined" : false
}</programlisting>
      <itemizedlist>
          <listitem>
            <para><literal>graphicalNotationDefined</literal>：表示流程定义包含图形信息（BPMN DI）。</para>
          </listitem>
          <listitem>
            <para><literal>resource</literal>：包含实际部署的BPMN 2.0 xml。</para>
          </listitem>
          <listitem>
            <para><literal>diagramResource</literal>：包含流程的图形内容，如果没有图形就返回null。</para>
          </listitem>
      </itemizedlist>
    </para>
    </section>

    <section>
      <title>更新流程定义的分类</title>
        <para>
          <programlisting>PUT repository/process-definitions/{processDefinitionId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求的JSON：</emphasis>
           <programlisting>
{
  "category" : "updatedcategory"
}</programlisting>
        </para>
        <para>
          <table>
              <title>更新流程定义的分类 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示已经修改了流程的分类。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示请求体中没有传递分类。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程定义。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>参考<literal>repository/process-definitions/{processDefinitionId}</literal>.
      </para>
 </section>
     <section>
      <title>获得一个流程定义的资源内容</title>
        <para>
          <programlisting>GET repository/process-definitions/{processDefinitionId}/resourcedata</programlisting>
        </para>
        <para>
            <table>
              <title>获得一个流程定义的资源内容 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>期望获得资源数据的流程定义的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">响应：</emphasis>
    </para>
    <para>
      与 <literal>GET repository/deployment/{deploymentId}/resourcedata/{resourceId}</literal>的响应码和响应体完全一致。
    </para>
  </section>

   <section>
      <title>获得流程定义的BPMN模型</title>
        <para>
          <programlisting>GET repository/process-definitions/{processDefinitionId}/model</programlisting>
        </para>
        <para>
            <table>
              <title>获得流程定义的BPMN模型 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>期望获得模型的流程定义的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得流程定义的BPMN模型 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示已找到流程定义，并返回了模型。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程定义。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">响应体：</emphasis>
       响应体是一个转换为JSON格式的<literal>org.activiti.bpmn.model.BpmnModel</literal>，包含整个流程定义模型。
<programlisting>
{
   "processes":[
      {
         "id":"oneTaskProcess",
         "xmlRowNumber":7,
         "xmlColumnNumber":60,
         "extensionElements":{

         },
         "name":"The One Task Process",
         "executable":true,
         "documentation":"One task process description",

         ...
    ],

    ...
}
</programlisting>
    </para>
    <para>

    </para>
  </section>

  <section>
      <title>暂停流程定义</title>
        <para>
          <programlisting>PUT repository/process-definitions/{processDefinitionId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
  "action" : "suspend",
  "includeProcessInstances" : "false",
  "date" : "2013-04-15T00:42:12Z"
}</programlisting>
        <table id="processDefinitionActionBodyParameters">
              <title>暂停流程定义 - 请求的JSON参数</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>描述</entry>
                    <entry>是否必须</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>action</entry>
                    <entry>执行的动作。<literal>activate</literal> 或 <literal>suspend</literal>。</entry>
                    <entry>是</entry>
                  </row>
                  <row>
                    <entry>includeProcessInstances</entry>
                    <entry>是否把流程定义下正在运行的流程时也暂停或激活。如果忽略，就不改变流程实例的状态。</entry>
                    <entry>否</entry>
                  </row>
                  <row>
                    <entry>date</entry>
                    <entry>执行暂停或激活的日期（ISO-8601格式）。如果忽略，会立即执行暂停或激活。</entry>
                    <entry>否</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>暂停流程定义 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示暂停流程成功。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程定义。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示请求的流程定义已经暂停了。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> 参考 <literal>repository/process-definitions/{processDefinitionId}</literal>的响应。
      </para>
 </section>
   <section>
      <title>激活流程定义</title>
        <para>
          <programlisting>PUT repository/process-definitions/{processDefinitionId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
  "action" : "activate",
  "includeProcessInstances" : "true",
  "date" : "2013-04-15T00:42:12Z"
}</programlisting>

        参考暂停流程定义的 <link linkend="processDefinitionActionBodyParameters">JSON参数</link>。
        </para>
        <para>
          <table>
              <title>激活流程定义 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示激活流程成功。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程定义</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示请求的流程定义已经激活了。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> 参考 <literal>repository/process-definitions/{processDefinitionId}</literal>的响应。
      </para>
 </section>

  <section>
      <title>获得流程定义的所有候选启动者</title>
        <para>
          <programlisting>GET repository/process-definitions/{processDefinitionId}/identitylinks</programlisting>
        </para>
        <para>
            <table>
              <title>获得流程定义的所有候选启动者 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>期望获得IdentityLink的流程定义id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得流程定义的所有候选启动者 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示已找到流程定义，并返回了请求的IdentityLink。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程定义。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/groups/admin",
      "user":null,
      "group":"admin",
      "type":"candidate"
   },
   {
      "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/users/kermit",
      "user":"kermit",
      "group":null,
      "type":"candidate"
   }
]</programlisting>
    </para>
  </section>
  <section>
      <title>为流程定义添加一个候选启动者</title>
      <para>
        <programlisting>POST repository/process-definitions/{processDefinitionId}/identitylinks</programlisting>
      </para>
      <para>
          <table>
            <title>为流程定义添加一个候选启动者 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>流程定义的id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
       <emphasis role="bold">请求体（用户）：</emphasis>
            <programlisting>
{
  "userId" : "kermit"
}</programlisting>
    </para>
    <para>
       <emphasis role="bold">请求体（组）：</emphasis>
            <programlisting>
{
  "groupId" : "sales"
}</programlisting>
    </para>
      <para>
        <table>
            <title>为流程定义添加一个候选启动者 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>201</entry>
                  <entry>表示找到了流程定义，并创建了IdentityLink。</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>表示找不到请求的流程定义。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/users/kermit",
  "user":"kermit",
  "group":null,
  "type":"candidate"
}</programlisting>
    </para>
 </section>

  <section>
      <title>删除流程定义的候选启动者</title>
      <para>
        <programlisting>DELETE repository/process-definitions/{processDefinitionId}/identitylinks/{family}/{identityId}</programlisting>
      </para>
      <para>
          <table>
            <title>删除流程定义的候选启动者 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>流程定义的id。</entry>
                </row>
                <row>
                  <entry>family</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry><literal>users</literal> 或 <literal>groups</literal>，依赖IdentityLink的类型。</entry>
                </row>
                <row>
                  <entry>identityId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>需要删除的候选创建者的身份的userId 或 groupId。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>删除流程定义的候选启动者 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>204</entry>
                  <entry>表示找到了流程定义，并删除了IdentityLink。响应体为空。</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>表示找不到请求的流程定义，或者在流程定义中找不到与url匹配的IdentityLink。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/users/kermit",
  "user":"kermit",
  "group":null,
  "type":"candidate"
}</programlisting>
    </para>
    </section>

     <section>
      <title>获得流程定义的一个候选启动者</title>
      <para>
        <programlisting>GET repository/process-definitions/{processDefinitionId}/identitylinks/{family}/{identityId}</programlisting>
      </para>
      <para>
          <table>
            <title>获得流程定义的一个候选启动者 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>流程定义的id。</entry>
                </row>
                <row>
                  <entry>family</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry><literal>users</literal> 或 <literal>groups</literal>，依赖IdentityLink的类型。</entry>
                </row>
                <row>
                  <entry>identityId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>用来获得候选启动者的身份的userId 或 groupId。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>获得流程定义的一个候选启动者 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示找到了流程定义，并返回了IdentityLink。</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>表示找不到请求的流程定义，或者在流程定义中找不到与url匹配的IdentityLink。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/users/kermit",
  "user":"kermit",
  "group":null,
  "type":"candidate"
}</programlisting>
    </para>
    </section>

 </section>

 <section>
  <title>模型</title>

   <section>
      <title>获得模型列表</title>
        <para>
          <programlisting>GET repository/models</programlisting>
        </para>
        <para>
            <table>
              <title>获得模型列表 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>id</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>指返回指定id的模型。</entry>
                  </row>
                  <row>
                    <entry>category</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定分类的模型。</entry>
                  </row>
                   <row>
                    <entry>categoryLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与给定分类匹配的模型。使用<literal>%</literal>作为通配符。</entry>
                  </row>
                   <row>
                    <entry>categoryNotEquals</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回非指定分类的模型。</entry>
                  </row>
                  <row>
                    <entry>name</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定名称的模型。</entry>
                  </row>
                   <row>
                    <entry>nameLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定名称匹配的模型。使用<literal>%</literal>作为通配符。</entry>
                  </row>
                  <row>
                    <entry>key</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定key的模型。</entry>
                  </row>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回包含在指定部署包中的模型。</entry>
                  </row>
                  <row>
                    <entry>version</entry>
                    <entry>否</entry>
                    <entry>Integer</entry>
                    <entry>只返回指定版本的模型。</entry>
                  </row>
                  <row>
                    <entry>latestVersion</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回最新版本的模型。最好与<literal>key</literal>一起使用。如果为 <literal>false</literal>，就会返回所有版本。</entry>
                  </row>
                  <row>
                    <entry>deployed</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回已部署的模型。如果为 <literal>false</literal>，只返回未部署的模型（deploymentId为null）。</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>否</entry>
                    <entry>'id' (默认), 'category', 'createTime', 'key', 'lastUpdateTime', 'name' 和 'version'</entry>
                    <entry>排序的字段，和'order'一起使用。</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link>。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得模型列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回了模型</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递的参数格式错误。状态信息中包含更多信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "name":"Model name",
         "key":"Model key",
         "category":"Model category",
         "version":2,
         "metaInfo":"Model metainfo",
         "deploymentId":"7",
         "id":"10",
         "url":"http://localhost:8182/repository/models/10",
         "createTime":"2013-06-12T14:31:08.612+0000",
         "lastUpdateTime":"2013-06-12T14:31:08.612+0000",
         "deploymentUrl":"http://localhost:8182/repository/deployments/7"
      },

      ...

   ],
   "total":2,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":2
}</programlisting>
    </para>
    </section>

    <section>
      <title>获得一个模型</title>
        <para>
          <programlisting>GET repository/models/{modelId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得一个模型 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>modelId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望获得的模型id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得一个模型 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了模型并成功返回了。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"5",
   "url":"http://localhost:8182/repository/models/5",
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":2,
   "metaInfo":"Model metainfo",
   "deploymentId":"2",
   "deploymentUrl":"http://localhost:8182/repository/deployments/2",
   "createTime":"2013-06-12T12:31:19.861+0000",
   "lastUpdateTime":"2013-06-12T12:31:19.861+0000"
}</programlisting>
    </para>
    </section>

 <section>
      <title>更新模型</title>
        <para>
          <programlisting>PUT repository/models/{modelId}</programlisting>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
{
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":2,
   "metaInfo":"Model metainfo",
   "deploymentId":"2"
}</programlisting>
   所有请求参数都是可选的。比如，你可以只在请求体的JSON对象中包含'name'属性，只更新模型的名称，这样其他的字段都不会受到影响。如果显示包含了一个属性，并设置为null，模型值会被更新为null。比如：<literal>{"metaInfo" : null}</literal>会清空模型的metaInfo。
    </para>
        <para>
          <table>
              <title>更新模型 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了模型，并成功更新。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"5",
   "url":"http://localhost:8182/repository/models/5",
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":2,
   "metaInfo":"Model metainfo",
   "deploymentId":"2",
   "deploymentUrl":"http://localhost:8182/repository/deployments/2",
   "createTime":"2013-06-12T12:31:19.861+0000",
   "lastUpdateTime":"2013-06-12T12:31:19.861+0000"
}</programlisting>
    </para>
    </section>

    <section>
      <title>新建模型</title>
        <para>
          <programlisting>POST repository/models</programlisting>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
{
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":1,
   "metaInfo":"Model metainfo",
   "deploymentId":"2"
}</programlisting>
   All request values are optional. For example, you can only include the 'name' attribute in the request body JSON-object, only setting the name of the model, leaving all other fields null.
    </para>
        <para>
          <table>
              <title>新建模型 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示成功创建了模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"5",
   "url":"http://localhost:8182/repository/models/5",
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":1,
   "metaInfo":"Model metainfo",
   "deploymentId":"2",
   "deploymentUrl":"http://localhost:8182/repository/deployments/2",
   "createTime":"2013-06-12T12:31:19.861+0000",
   "lastUpdateTime":"2013-06-12T12:31:19.861+0000"
}</programlisting>
    </para>
    </section>

      <section>
      <title>删除模型</title>
        <para>
          <programlisting>DELETE repository/models/{modelId}</programlisting>
        </para>
        <para>
            <table>
              <title>删除模型 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>modelId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除的模型id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>删除模型 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了模型并成功删除。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>获得模型的可编译源码</title>
        <para>
          <programlisting>GET repository/models/{modelId}/source</programlisting>
        </para>
        <para>
            <table>
              <title>获得模型的可编译源码 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>modelId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>模型id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得模型的可编译源码 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了模型并返回了源码。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
       响应体包含了模型的原始可编译源码。无论源码的内容是什么，响应的content-type都设置为<literal>application/octet-stream</literal>。
    </para>
    </section>

    <section>
      <title>设置模型的可编辑源码</title>
         <para>
        <programlisting>PUT repository/models/{modelId}/source</programlisting>
      </para>
      <para>
          <table>
            <title>设置模型的可编辑源码 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>modelId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>模型的id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。
        </para>
        <para>
          <table>
              <title>设置模型的可编辑源码 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了模型并更新了源码。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">成功响应体：</emphasis>
       响应体包含了模型的原始可编译源码。无论源码的内容是什么，响应的content-type都设置为<literal>application/octet-stream</literal>。
    </para>
  </section>

      <section>
      <title>获得模型的附加可编辑源码</title>
        <para>
          <programlisting>GET repository/models/{modelId}/source-extra</programlisting>
        </para>
        <para>
            <table>
              <title>获得模型的附加可编辑源码 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>modelId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>模型id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得模型的附加可编辑源码 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了模型并返回了源码。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
       响应体包含了模型的原始可编译源码。无论附加源码的内容是什么，响应的content-type都设置为<literal>application/octet-stream</literal>。
    </para>
    </section>

    <section>
      <title>设置模型的附加可编辑源码</title>
         <para>
        <programlisting>PUT repository/models/{modelId}/source-extra</programlisting>
      </para>
      <para>
          <table>
            <title>设置模型的附加可编辑源码 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>modelId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>模型id</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容
        </para>
        <para>
          <table>
              <title>设置模型的附加可编辑源码 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了模型并更新了附加源码。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">成功响应体：</emphasis>
       响应体包含了模型的原始可编译源码。无论附加源码的内容是什么，响应的content-type都设置为<literal>application/octet-stream</literal>。
    </para>
  </section>

 </section>

 <section>
  <title>流程实例</title>

   <section>
      <title>获得流程实例</title>
        <para>
          <programlisting>GET runtime/process-instances/{processInstanceId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得流程实例 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得流程实例 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例并成功返回。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"7",
   "url":"http://localhost:8182/runtime/process-instances/7",
   "businessKey":"myBusinessKey",
   "suspended":false,
   "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
   "activityId":"processTask"
}</programlisting>
    </para>
</section>

 <section>
      <title>删除流程实例</title>
        <para>
          <programlisting>DELETE runtime/process-instances/{processInstanceId}</programlisting>
        </para>
        <para>
            <table>
              <title>删除流程实例 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除的流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>删除流程实例 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了流程实例并已删除。响应内容为空。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
</section>

<section>
      <title>激活或挂起流程实例</title>
        <para>
          <programlisting>PUT runtime/process-instances/{processInstanceId}</programlisting>
        </para>
        <para>
            <table>
              <title>激活或挂起流程实例 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望激活或挂起的流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求响应体（挂起）：</emphasis>
            <programlisting>
{
   "action":"suspend"
}</programlisting>
    </para>
     <para>
       <emphasis role="bold">请求响应体（激活）：</emphasis>
            <programlisting>
{
   "action":"activate"
}</programlisting>
    </para>
        <para>
          <table>
              <title>激活或挂起流程实例 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例并执行了对应操作。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示提供的操作不合法。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                   <row>
                    <entry>409</entry>
                    <entry>表示无法执行请求的流程实例操作，因为流程实例已经激活或挂起了。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
</section>

<section>
      <title>启动流程实例</title>
        <para>
          <programlisting>POST runtime/process-instances</programlisting>
        </para>
        <para>
       <emphasis role="bold">请求体（使用流程定义id启动）：</emphasis>
            <programlisting>
{
   "processDefinitionId":"oneTaskProcess:1:158",
   "businessKey":"myBusinessKey",
   "variables": [
      {
        "name":"myVar",
        "value":"This is a variable",
      },

      ...
   ]
}</programlisting>
    </para>
    <para>
       <emphasis role="bold">请求体（使用流程定义key启动）：</emphasis>
            <programlisting>
{
   "processDefinitionKey":"oneTaskProcess",
   "businessKey":"myBusinessKey",
   "variables": [
      {
        "name":"myVar",
        "value":"This is a variable",
      },

      ...
   ]
}</programlisting>
    </para>
    <para>
       <emphasis role="bold">请求体（使用message启动）：</emphasis>
            <programlisting>
{
   "processDefinitionKey":"newOrderMessage",
   "businessKey":"myBusinessKey",
   "variables": [
      {
        "name":"myVar",
        "value":"This is a variable",
      },

      ...
   ]
}</programlisting>
    </para>
    <para>
	请求体中只能使用<literal>processDefinitionId</literal>，<literal>processDefinitionKey</literal>或<literal>message</literal>三者之一。<literal>businessKey</literal>和<literal>variables</literal>都是可选的。
	可以在<link linkend="restVariables">REST变量章节</link>了解更多关于变量格式的信息。注意忽略变量作用域，流程变量总是<literal>local</literal>。
    </para>
        <para>
          <table>
              <title>启动流程实例 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示成功启动了流程实例。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示要么找到不到流程定义（基于id或key），要么指定的message不会启动流程，要么传递了非法的变量。状态描述中包含了错误相关的额外信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"7",
   "url":"http://localhost:8182/runtime/process-instances/7",
   "businessKey":"myBusinessKey",
   "suspended":false,
   "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
   "activityId":"processTask"
}</programlisting>
    </para>
</section>

<section id="restProcessInstancesGet">
      <title>显示流程实例列表</title>
        <para>
          <programlisting>GET runtime/process-instances</programlisting>
        </para>
        <para>
            <table>
              <title>显示流程实例列表 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>id</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定id的流程实例。</entry>
                  </row>
                  <row>
                    <entry>processDefinitionKey</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定流程定义key的流程实例。</entry>
                  </row>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定流程定义id的流程实例。</entry>
                  </row>
                  <row>
                    <entry>businessKey</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定businessKey的流程实例。</entry>
                  </row>
                  <row>
                    <entry>involvedUser</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定用户参与过的流程实例。</entry>
                  </row>
                  <row>
                    <entry>suspended</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回挂起的流程实例。如果为 <literal>false</literal>，只返回未挂起（激活）的流程实例。</entry>
                  </row>
                  <row>
                    <entry>superProcessInstanceId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定上级流程实例id的流程实例（对应call-activity）。</entry>
                  </row>
                  <row>
                    <entry>subProcessInstanceId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定子流程id的流程实例（对方call-activity）。</entry>
                  </row>
                  <row>
                    <entry>excludeSubprocesses</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>只返回非子流程的流程实例。</entry>
                  </row>
                  <row>
                    <entry>includeProcessVariables</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>表示结果中包含流程变量。</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>排序字段，应该为<literal>id</literal>（默认），<literal>processDefinitionId</literal> 或 <literal>processDefinitionKey</literal>三者之一。</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c4"><para>可以使用通用的<link linkend="restPagingAndSort">分页和排序查询参数</link>。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>显示流程实例列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回了流程实例。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "id":"7",
         "url":"http://localhost:8182/runtime/process-instances/7",
         "businessKey":"myBusinessKey",
         "suspended":false,
         "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
         "activityId":"processTask"
      },

      ...
   ],
   "total":2,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":2
}</programlisting>
    </para>
    </section>

    <section>
      <title>查询流程实例</title>
        <para>
          <programlisting>POST query/process-instances</programlisting>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
{
  "processDefinitionKey":"oneTaskProcess",
  "variables":
  [
    {
        "name" : "myVariable",
        "value" : 1234,
        "operator" : "equals",
        "type" : "long"
    },
    ...
  ],
  ...
}</programlisting>

请求体可以包含所有用于<link linkend="restProcessInstancesGet">显示流程实例列表</link>中的查询参数。除此之外，查询条件中也可以使用变量列表，格式<link linkend="restQueryVariable">在此</link>。
    </para>
    <para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link>。</para>
        <para>
          <table>
              <title>查询流程实例 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回了流程实例。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "id":"7",
         "url":"http://localhost:8182/runtime/process-instances/7",
         "businessKey":"myBusinessKey",
         "suspended":false,
         "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
         "activityId":"processTask"
      },

      ...
   ],
   "total":2,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":2
}</programlisting>
    </para>
    </section>

    <section>
      <title>获得流程实例的流程图</title>
        <para>
          <programlisting>GET runtime/process-instances/{processInstanceId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得流程实例的流程图 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望获得流程图的流程实例id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得流程实例的流程图 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例，并返回了流程图。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示找不到请求的流程实例，流程不包含挺信息（BPMN:DI），所以没有创建图片。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"7",
   "url":"http://localhost:8182/runtime/process-instances/7",
   "businessKey":"myBusinessKey",
   "suspended":false,
   "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
   "activityId":"processTask"
}</programlisting>
    </para>
</section>

     <section>
      <title>获得流程实例的参与者</title>
        <para>
          <programlisting>GET runtime/process-instances/{processInstanceId}/identitylinks</programlisting>
        </para>
        <para>
            <table>
              <title>获得流程实例的参与者 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>关联的流程实例id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得流程实例的参与者 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例，并返回了IdentityLink。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "url":"http://localhost:8182/runtime/process-instances/5/identitylinks/users/john/customType",
      "user":"john",
      "group":null,
      "type":"customType"
   },
   {
      "url":"http://localhost:8182/runtime/process-instances/5/identitylinks/users/paul/candidate",
      "user":"paul",
      "group":null,
      "type":"candidate"
   }
]</programlisting>
注意<literal>groupId</literal>总是null，因为只有用户才能实际参与到流程实例中。
    </para>
</section>

<section>
      <title>为流程实例添加一个参与者</title>
        <para>
          <programlisting>POST runtime/process-instances/{processInstanceId}/identitylinks</programlisting>
        </para>
        <para>
            <table>
              <title>为流程实例添加一个参与者 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>关联的流程实例id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
{
  "userId":"kermit",
  "type":"participant"
}</programlisting>
<literal>userId</literal> 和 <literal>type</literal> 都是必填项。
    </para>
        <para>
          <table>
              <title>为流程实例添加一个参与者 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示找到了流程实例，并创建了关联。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求体没有包含userId或type。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "url":"http://localhost:8182/runtime/process-instances/5/identitylinks/users/john/customType",
   "user":"john",
   "group":null,
   "type":"customType"
}</programlisting>
注意<literal>groupId</literal>总是null，因为只有用户才能实际参与到流程实例中。
    </para>
</section>

<section>
      <title>删除一个流程实例的参与者</title>
        <para>
          <programlisting>DELETE runtime/process-instances/{processInstanceId}/identitylinks/users/{userId}/{type}</programlisting>
        </para>
        <para>
            <table>
              <title>删除一个流程实例的参与者 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>流程实例id</entry>
                  </row>
                  <row>
                    <entry>userId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>要删除关联的用户id</entry>
                  </row>
                  <row>
                    <entry>type</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>删除的关联类型</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>删除一个流程实例的参与者 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了流程实例，并删除了关联。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例，或找不到期望删除的关联。响应状态包含了错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "url":"http://localhost:8182/runtime/process-instances/5/identitylinks/users/john/customType",
   "user":"john",
   "group":null,
   "type":"customType"
}</programlisting>
注意<literal>groupId</literal>总是null，因为只有用户才能实际参与到流程实例中。
    </para>
</section>

 <section>
      <title>列出流程实例的变量</title>
        <para>
          <programlisting>GET runtime/process-instances/{processInstanceId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>列出流程实例的变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>列出流程实例的变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例，并返回了变量。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   },
   {
      "name":"byteArrayProcVar",
      "type":"binary",
      "value":null,
      "valueUrl":"http://localhost:8182/runtime/process-instances/5/variables/byteArrayProcVar/data",
      "scope":"local"
   },

   ...
]</programlisting>
当变量为二进制或序列化类型时，<literal>valueUrl</literal>给出了获得原始数据的URL。如果是普通变量，变量值就会直接包含在响应中。
注意只会返回<literal>local</literal>作用域的变量，因为流程实例变量没有<literal>global</literal>作用域。</para>
</section>

  <section>
      <title>获得流程实例的一个变量</title>
        <para>
          <programlisting>GET runtime/process-instances/{processInstanceId}/variables/{variableName}</programlisting>
        </para>
        <para>
            <table>
              <title>获得流程实例的一个变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的流程实例id</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取变量的名称</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得流程实例的一个变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例和变量，并返回了变量。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求体不完全，或包含非法值。状态描述包含对应错误的详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例，或流程实例中不包含指定名称的变量。状态描述中包含对应错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   }</programlisting>
    当变量为二进制或序列化类型时，<literal>valueUrl</literal>给出了获得原始数据的URL。如果是普通变量，变量值就会直接包含在响应中。
    注意只会返回<literal>local</literal>作用域的变量，因为流程实例变量没有<literal>global</literal>作用域。</para>
  </section>


  <section>
      <title>创建（或更新）流程实例变量</title>
        <para>
          <programlisting>POST runtime/process-instances/{processInstanceId}/variables</programlisting>
          <programlisting>PUT runtime/process-instances/{processInstanceId}/variables</programlisting>
        </para>
        <para>
		  使用<literal>POST</literal>时，会创建所有传递的变量。如果流程实例中已经存在了其中一个变量，就会返回一个错误（409 - CONFLICT）。使用<literal>PUT</literal>时，
		  流程实例中不存在的变量会被创建，已存在的变量会被更新，不会有任何错误。
            <table>
              <title>创建（或更新）流程实例变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
[
   {
      "name":"intProcVar"
      "type":"integer"
      "value":123
   },

   ...
]</programlisting>
        请求体的数组中可以包含任意多个变量。关于变量格式的更多信息可以参考<link linkend="restVariables">REST变量章节</link>。注意此处忽略作用域，流程实例只能设置<literal>local</literal>作用域。
        </para>
        <para>
          <table>
              <title>创建（或更新）流程实例变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示找到了流程实例，并创建了变量。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求体不完整，或包含非法值。状态描述包含对应错误的详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                   <row>
                    <entry>409</entry>
                    <entry>表示找到了流程实例，但是已经存在一个相同名称的变量（只在使用POST方法时抛出）。可以使用更新方法替代。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   },

   ...

]</programlisting>
  </para>
  </section>

  <section>
      <title>更新一个流程实例变量</title>
        <para>
          <programlisting>PUT runtime/process-instances/{processInstanceId}/variables/{variableName}</programlisting>
        </para>
        <para>
            <table>
              <title>更新一个流程实例变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的流程实例id</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望获得的变量名称</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
 {
    "name":"intProcVar"
    "type":"integer"
    "value":123
 }</programlisting>
        请求体的数组中可以包含任意多个变量。关于变量格式的更多信息可以参考<link linkend="restVariables">REST变量章节</link>。注意此处忽略作用域，流程实例只能设置<literal>local</literal>作用域。
        </para>
        <para>
          <table>
              <title>更新一个流程实例变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例和变量，并更新了变量。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例，或找不到给定名称的流程实例变量。状态描述包含对应错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   }</programlisting>
  当变量为二进制或序列化类型时，<literal>valueUrl</literal>给出了获得原始数据的URL。如果是普通变量，变量值就会直接包含在响应中。
  注意只会返回<literal>local</literal>作用域的变量，因为流程实例变量没有<literal>global</literal>作用域。
  </para>
  </section>

   <section>
      <title>创建一个新的二进制流程变量</title>
        <para>
          <programlisting>POST runtime/process-instances/{processInstanceId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>创建一个新的二进制流程变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建新变量对应的流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/process-instances/123/variables/binaryVariable/data"
}</programlisting>
          <table>
              <title>创建一个新的二进制流程变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示成功创建了变量，并返回了结果</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有提供希望创建的变量名称。状态消息包含详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示流程实例中已经包含了给定名称的变量。可以使用PUT方法来更新变量。</entry>
                  </row>
                  <row>
                    <entry>415</entry>
                    <entry>表示序列化数据包含的对象的类并不在运行Activiti引擎的JVM中，所以无法反序列化。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>更新一个二进制的流程实例变量</title>
        <para>
          <programlisting>PUT runtime/process-instances/{processInstanceId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>更新一个二进制的流程实例变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建新变量对应的流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/process-instances/123/variables/binaryVariable/data"
}</programlisting>
          <table>
              <title>更新一个二进制的流程实例变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示成功更新了变量，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示未提供希望更新的变量名称。状态消息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例id，或找不到指定名称的流程实例变量。</entry>
                  </row>
                  <row>
                    <entry>415</entry>
                    <entry>表示序列化数据包含的对象的类并不在运行Activiti引擎的JVM中，所以无法反序列化。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

</section>

  <section>
  <title>分支</title>

   <section>
      <title>获取一个分支</title>
        <para>
          <programlisting>GET runtime/executions/{executionId}</programlisting>
        </para>
        <para>
            <table>
              <title>获取一个分支 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取分支的id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取一个分支 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了分支，并成功返回。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到分支</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"5",
   "url":"http://localhost:8182/runtime/executions/5",
   "parentId":null,
   "parentUrl":null,
   "processInstanceId":"5",
   "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
   "suspended":false,
   "activityId":null
}</programlisting>
    </para>
  </section>
 <section>
      <title>对分支执行操作</title>
        <para>
          <programlisting>PUT runtime/executions/{executionId}</programlisting>
        </para>
        <para>
            <table>
              <title>对分支执行操作 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望执行操作的分支id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体（继续执行分支）：</emphasis>
            <programlisting>
{
  "action":"signal"
}</programlisting>
    </para>
     <para>
       <emphasis role="bold">请求体（分支接收了信号事件）：</emphasis>
            <programlisting>
{
  "action":"signalEventReceived",
  "signalName":"mySignal"
  "variables": [ ... ]
}</programlisting>
 提醒分支接收了一个信号事件，要使用一个<literal>signalName</literal>参数。还可以传递<literal>variables</literal>参数，它会在执行操作之前设置到分支中。
    </para>
     <para>
       <emphasis role="bold">请求体（分支接收了消息事件）：</emphasis>
            <programlisting>
{
  "action":"messageEventReceived",
  "messageName":"myMessage"
  "variables": [ ... ]
}</programlisting>
 提醒分支接收了一个消息事件，要使用一个<literal>messageName</literal>参数。还可以传递<literal>variables</literal>参数，它会在执行操作之前设置到分支中。
    </para>
        <para>
          <table>
              <title>对分支执行操作 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了分支，并执行了操作。</entry>
                  </row>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了分支，执行了操作，并且操作导致分支结束了。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求的操作不合法，请求中缺少必须的参数，或传递了非法的变量。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到分支</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体（当操作没有导致分支结束的情况）：</emphasis>
            <programlisting>
{
   "id":"5",
   "url":"http://localhost:8182/runtime/executions/5",
   "parentId":null,
   "parentUrl":null,
   "processInstanceId":"5",
   "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
   "suspended":false,
   "activityId":null
}</programlisting>
    </para>
  </section>

  <section>
      <title>获得一个分支的所有活动节点</title>
        <para>
          <programlisting>GET runtime/executions/{executionId}/activities</programlisting>
        </para>
        <para>
		  返回分支以及子分支当前所有活动的节点（递归所有下级）。
        </para>
        <para>
            <table>
              <title>获得一个分支的所有活动节点 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取节点对应的分支id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得一个分支的所有活动节点 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了分支，并返回了节点。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到分支</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  "userTaskForManager",
  "receiveTask"
]</programlisting>
    </para>
  </section>

  <section id="restExecutionsGet">
      <title>获取分支列表</title>
        <para>
          <programlisting>GET repository/executions</programlisting>
        </para>
        <para>
            <table>
              <title>获取分支列表 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>id</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定id的分支。</entry>
                  </row>
                  <row>
                    <entry>processDefinitionKey</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定流程定义key的分支。</entry>
                  </row>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定流程定义id的分支。</entry>
                  </row>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回作为指定流程实例id一部分的分支。</entry>
                  </row>
                  <row>
                    <entry>messageEventSubscriptionName</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回订阅了指定名称消息的分支。</entry>
                  </row>
                  <row>
                    <entry>signalEventSubscriptionName</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回订阅了指定名称信号的分支。</entry>
                  </row>
                  <row>
                    <entry>parentId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定分支直接下级的分支。</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>排序字段，应该和<literal>processInstanceId</literal>（默认）， <literal>processDefinitionId</literal> 或 <literal>processDefinitionKey</literal>之一一起使用。</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取分支列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回了分支。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "id":"5",
         "url":"http://localhost:8182/runtime/executions/5",
         "parentId":null,
         "parentUrl":null,
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "suspended":false,
         "activityId":null
      },
      {
         "id":"7",
         "url":"http://localhost:8182/runtime/executions/7",
         "parentId":"5",
         "parentUrl":"http://localhost:8182/runtime/executions/5",
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "suspended":false,
         "activityId":"processTask"
      }
   ],
   "total":2,
   "start":0,
   "sort":"processInstanceId",
   "order":"asc",
   "size":2
}</programlisting>
    </para>
    </section>

    <section>
      <title>查询分支</title>
        <para>
          <programlisting>POST query/executions</programlisting>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
{
  "processDefinitionKey":"oneTaskProcess",
  "variables":
  [
    {
        "name" : "myVariable",
        "value" : 1234,
        "operator" : "equals",
        "type" : "long"
    },
    ...
  ],
  "processInstanceVariables":
  [
    {
        "name" : "processVariable",
        "value" : "some string",
        "operator" : "equals",
        "type" : "string"
    },
    ...
  ],
  ...
}</programlisting>

请求体可以包含在<link linkend="restExecutionsGet">获取分支列表</link>中可以使用的查询条件。除此之外，也可以在查询中提供<literal>variables</literal>和<literal>processInstanceVariables</literal>列表，关于变量的格式可以参考<link linkend="restQueryVariable">此处</link>。
    </para>
    <para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para>
        <para>
          <table>
              <title>查询分支 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回了分支。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "id":"5",
         "url":"http://localhost:8182/runtime/executions/5",
         "parentId":null,
         "parentUrl":null,
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "suspended":false,
         "activityId":null
      },
      {
         "id":"7",
         "url":"http://localhost:8182/runtime/executions/7",
         "parentId":"5",
         "parentUrl":"http://localhost:8182/runtime/executions/5",
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "suspended":false,
         "activityId":"processTask"
      }
   ],
   "total":2,
   "start":0,
   "sort":"processInstanceId",
   "order":"asc",
   "size":2
}</programlisting>
    </para>
    </section>


    <section>
      <title>获取分支的变量列表</title>
        <para>
          <programlisting>GET runtime/executions/{executionId}/variables?scope={scope}</programlisting>
        </para>
        <para>
            <table>
              <title>获取分支的变量列表 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的分支id。</entry>
                  </row>
                   <row>
                    <entry>scope</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry><literal>local</literal> 或 <literal>global</literal>。如果忽略，会返回local和global作用域下的所有变量。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取分支的变量列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了分支，并返回了变量。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的分支。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"global"
   },
   {
      "name":"byteArrayProcVar",
      "type":"binary",
      "value":null,
      "valueUrl":"http://localhost:8182/runtime/process-instances/5/variables/byteArrayProcVar/data",
      "scope":"local"
   },

   ...
]</programlisting>
当变量为二进制或序列化类型时，<literal>valueUrl</literal>给出了获得原始数据的URL。如果是普通变量，变量值就会直接包含在响应中。
</para>
</section>

  <section>
      <title>获得分支的一个变量</title>
        <para>
          <programlisting>GET runtime/executions/{executionId}/variables/{variableName}?scope={scope}</programlisting>
        </para>
        <para>
            <table>
              <title>获得分支的一个变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的分支id</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取的变量名称。</entry>
                  </row>
                   <row>
                    <entry>scope</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry><literal>local</literal> 或 <literal>global</literal>。如果忽略，返回local变量（如果存在）。如果不存在局部变量，返回global变量（如果存在）。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得分支的一个变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了分支和变量，并返回了变量。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求体不完全，或包含非法数值。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的分支，或分支在请求作用域中不包含指定名称的变量（如果忽略scope参数，既不存在local变量也不存在global变量）。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   }</programlisting>
    当变量为二进制或序列化类型时，<literal>valueUrl</literal>给出了获得原始数据的URL。如果是普通变量，变量值就会直接包含在响应中。
    </para>
  </section>


  <section>
      <title>新建（或更新）分支变量</title>
        <para>
          <programlisting>POST runtime/executions/{executionId}/variables</programlisting>
          <programlisting>PUT runtime/executions/{executionId}/variables</programlisting>
        </para>
        <para>
		  使用<literal>POST</literal>时，会创建所有传递的变量。如果流程实例中已经存在了其中一个变量，就会返回一个错误（409 - CONFLICT）。使用<literal>PUT</literal>时，
		  流程实例中不存在的变量会被创建，已存在的变量会被更新，不会有任何错误。
            <table>
              <title>新建（或更新）分支变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的分支id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
[
   {
      "name":"intProcVar"
      "type":"integer"
      "value":123,
      "scope":"local"
   },

   ...
]</programlisting>
        <emphasis role="bold">注意你只能提供作用域相同的变量。如果请求体数组中包含了不同作用域的变量，请求会返回一个错误（400 - BAD REQUEST）。</emphasis>请求体数据中可以传递任意个数的变量。关于变量格式的详细信息可以参考<link linkend="restVariables">REST变量章节</link>。注意，如果忽略了作用域，只有<literal>local</literal>作用域的比那两可以设置到流程实例中。
        </para>
        <para>
          <table>
              <title>新建（或更新）分支变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示找到了分支，并成功创建了变量。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求体不完全或包含了非法数据。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的分支。</entry>
                  </row>
                   <row>
                    <entry>409</entry>
                    <entry>表示找到了流程实例，但是已经存在一个相同名称的变量（只在使用POST方法时抛出）。可以使用更新方法替代。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   },

   ...

]</programlisting>
  </para>
  </section>

  <section>
      <title>更新分支变量</title>
        <para>
          <programlisting>PUT runtime/executions/{executionId}/variables/{variableName}</programlisting>
        </para>
        <para>
            <table>
              <title>更新分支变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量对应的分支id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量名称。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
 {
    "name":"intProcVar"
    "type":"integer"
    "value":123,
    "scope":"global"
 }</programlisting>
        关于变量格式的详细信息可以参考<link linkend="restVariables">REST变量章节</link>。
        </para>
        <para>
          <table>
              <title>更新分支变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了分支和变量，并成功更新了变量。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的分支，或分支不包含指定名称的变量。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"global"
   }</programlisting>
    当变量为二进制或序列化类型时，<literal>valueUrl</literal>给出了获得原始数据的URL。如果是普通变量，变量值就会直接包含在响应中。
  </para>
  </section>

   <section>
      <title>创建一个二进制变量</title>
        <para>
          <programlisting>POST runtime/executions/{executionId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>创建一个二进制变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望创建的新变量对应的分支id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/executions/123/variables/binaryVariable/data"
}</programlisting>
          <table>
              <title>创建一个二进制变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示成功创建了变量，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有提供希望创建的变量名称。状态信息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的分支。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示分支已经拥有了一个与指定名称相关的变量。使用PUT方法来代替更新分支变量。</entry>
                  </row>
                  <row>
                    <entry>415</entry>
                    <entry>表示序列化数据包含的对象的类并不在运行Activiti引擎的JVM中，所以无法反序列化。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>更新已经已存在的二进制分支变量</title>
         <para>
          <programlisting>PUT runtime/executions/{executionId}/variables/{variableName}</programlisting>
        </para>
        <para>
            <table>
              <title>更新已经已存在的二进制分支变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量对应的分支id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量名称。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
           <listitem>
            <para><literal>scope</literal>：创建的变量作用于。如果忽略，假设是<literal>local</literal>。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/executions/123/variables/binaryVariable/data"
}</programlisting>
          <table>
              <title>更新已经已存在的二进制分支变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示变量已成功工薪，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有提供希望更新的变量名称。状态信息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示没有找到分支，或分支不包含指定名称的变量。</entry>
                  </row>
                  <row>
                    <entry>415</entry>
                    <entry>表示序列化数据包含的对象的类并不在运行Activiti引擎的JVM中，所以无法反序列化。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
</section>

  <section>
  <title>任务</title>
      <section>
      <title>获取任务</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}</programlisting>
        </para>
        <para>
            <table>
              <title>获取任务 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望获得的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取任务 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务并返回。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "assignee" : "kermit",
  "createTime" : "2013-04-17T10:17:43.902+0000",
  "delegationState" : "pending",
  "description" : "Task description",
  "dueDate" : "2013-04-17T10:17:43.902+0000",
  "execution" : "http://localhost:8182/runtime/executions/5",
  "id" : "8",
  "name" : "My task",
  "owner" : "owner",
  "parentTask" : "http://localhost:8182/runtime/tasks/9",
  "priority" : 50,
  "processDefinition" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
  "processInstance" : "http://localhost:8182/runtime/process-instances/5",
  "suspended" : false,
  "taskDefinitionKey" : "theTask",
  "url" : "http://localhost:8182/runtime/tasks/8"
}</programlisting>
      <itemizedlist>
          <listitem>
            <para><literal>delegationState</literal>：任务的代理状态。可以为<literal>null</literal>，<literal>"pending"</literal> 或 <literal>"resolved"</literal>。</para>
          </listitem>
      </itemizedlist>
    </para>
    </section>

  <section id="restTasksGet">
      <title>任务列表</title>
        <para>
          <programlisting>GET runtime/tasks</programlisting>
        </para>
        <para>
            <table>
              <title>任务列表 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>name</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定的名称。</entry>
                  </row>
                  <row>
                    <entry>nameLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定名称匹配的任务。</entry>
                  </row>
                  <row>
                    <entry>description</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定描述的任务。</entry>
                  </row>
                  <row>
                    <entry>priority</entry>
                    <entry>否</entry>
                    <entry>Integer</entry>
                    <entry>只返回指定优先级的任务。</entry>
                  </row>
                  <row>
                    <entry>minimumPriority</entry>
                    <entry>否</entry>
                    <entry>Integer</entry>
                    <entry>只返回比指定优先级大的任务。</entry>
                  </row>
                  <row>
                    <entry>maximumPriority</entry>
                    <entry>否</entry>
                    <entry>Integer</entry>
                    <entry>只返回比指定优先级小的任务。</entry>
                  </row>
                  <row>
                    <entry>assignee</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回分配给指定用户的任务。</entry>
                  </row>
                  <row>
                    <entry>owner</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回用户代理人为指定用户的任务。</entry>
                  </row>
                  <row>
                    <entry>unassigned</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>只返回没有分配给任何人的任务。如果传递<literal>false</literal>，这个值就会被忽略。</entry>
                  </row>
                  <row>
                    <entry>delegationState</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定代理状态的任务。可选值为<literal>pending</literal> 和 <literal>resolved</literal>。</entry>
                  </row>
                  <row>
                    <entry>candidateUser</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回可以被指定用户领取的任务。这包含将用户设置为直接候选人和用户作为候选群组一员的情况。</entry>
                  </row>
                  <row>
                    <entry>candidateGroup</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回可以被指定群组中用户领取的任务。</entry>
                  </row>
                  <row>
                    <entry>involvedUser</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定用户参与过的任务。</entry>
                  </row>
                  <row>
                    <entry>taskDefinitionKey</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定任务定义id的任务。</entry>
                  </row>
                  <row>
                    <entry>taskDefinitionKeyLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回任务定义id与指定值匹配的任务。</entry>
                  </row>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回作为指定id的流程实例的一部分的任务。</entry>
                  </row>
                  <row>
                    <entry>processInstanceBusinessKey</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回作为指定key的流程实例的一部分的任务。</entry>
                  </row>
                  <row>
                    <entry>executionId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回作为指定id分支的一部分的任务。</entry>
                  </row>
                  <row>
                    <entry>createdOn</entry>
                    <entry>否</entry>
                    <entry>ISO Date</entry>
                    <entry>只返回指定创建时间的任务。</entry>
                  </row>
                  <row>
                    <entry>createdBefore</entry>
                    <entry>否</entry>
                    <entry>ISO Date</entry>
                    <entry>只返回在指定时间之前创建的任务。</entry>
                  </row>
                  <row>
                    <entry>createdAfter</entry>
                    <entry>否</entry>
                    <entry>ISO Date</entry>
                    <entry>只返回在指定时间之后创建的任务。</entry>
                  </row>
                  <row>
                    <entry>dueOn</entry>
                    <entry>否</entry>
                    <entry>ISO Date</entry>
                    <entry>只返回指定持续时间的任务。</entry>
                  </row>
                  <row>
                    <entry>dueBefore</entry>
                    <entry>否</entry>
                    <entry>ISO Date</entry>
                    <entry>只返回持续时间在指定时间之前的任务。</entry>
                  </row>
                  <row>
                    <entry>dueAfter</entry>
                    <entry>否</entry>
                    <entry>ISO Date</entry>
                    <entry>只返回持续时间在指定时间之后的任务。</entry>
                  </row>
                  <row>
                    <entry>excludeSubTasks</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>只返回非子任务的任务。</entry>
                  </row>
                  <row>
                    <entry>active</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回未挂起的任务（作为未挂起流程的一部分，或者不属于任何流程）。如果为false，只返回作为挂起流程一部分的任务。</entry>
                  </row>
                  <row>
                    <entry>includeTaskLocalVariables</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>Indication to include task local variables in the result.</entry>
                  </row>
                  <row>
                    <entry>includeProcessVariables</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>表示在结果中包含变量。</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>任务列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回任务。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递的参数格式错误，或'delegationState'使用了不合法的数据('pending' 和 'resolved'以外的数据)。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "data": [
    {
      "assignee" : "kermit",
      "createTime" : "2013-04-17T10:17:43.902+0000",
      "delegationState" : "pending",
      "description" : "Task description",
      "dueDate" : "2013-04-17T10:17:43.902+0000",
      "execution" : "http://localhost:8182/runtime/executions/5",
      "id" : "8",
      "name" : "My task",
      "owner" : "owner",
      "parentTask" : "http://localhost:8182/runtime/tasks/9",
      "priority" : 50,
      "processDefinition" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstance" : "http://localhost:8182/runtime/process-instances/5",
      "suspended" : false,
      "taskDefinitionKey" : "theTask",
      "url" : "http://localhost:8182/runtime/tasks/8"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
    </para>
    </section>

   <section>
      <title>查询任务</title>
        <para>
          <programlisting>POST repository/tasks</programlisting>
        </para>
        <para>
          <emphasis role="bold">请求体：</emphasis>
          <programlisting>
{
  "name" : "My task",
  "description" : "The task description",

  ...

  "taskVariables" : [
    {
      "name" : "myVariable",
      "value" : 1234,
      "operator" : "equals",
      "type" : "long"
    }
  ],

    "processInstanceVariables" : [
      {
         ...
      }
    ]
  ]
}</programlisting>
        </para>
        <para>
		  此处所有被支持的JSON参数都和<link linkend="restTasksGet">获得任务集合</link>完全一样，只是使用JSON体参数的方式替代URL参数，这样就可以使用更加高级的查询方式，并能预防请求uri过长导致的问题。除此之外，可以基于任务和流程变量进行查询。<literal>taskVariables</literal> 和 <literal>processInstanceVariables</literal> 都可以包含 <link linkend="restQueryVariable">此处描述</link>的json数组。
        </para>
        <para>
          <table>
              <title>查询任务 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回任务。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递了格式错误的参数，或'delegationState'传递了非法数据 ( 'pending' 和 'resolved'之外的值)。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "data": [
    {
      "assignee" : "kermit",
      "createTime" : "2013-04-17T10:17:43.902+0000",
      "delegationState" : "pending",
      "description" : "Task description",
      "dueDate" : "2013-04-17T10:17:43.902+0000",
      "execution" : "http://localhost:8182/runtime/executions/5",
      "id" : "8",
      "name" : "My task",
      "owner" : "owner",
      "parentTask" : "http://localhost:8182/runtime/tasks/9",
      "priority" : 50,
      "processDefinition" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstance" : "http://localhost:8182/runtime/process-instances/5",
      "suspended" : false,
      "taskDefinitionKey" : "theTask",
      "url" : "http://localhost:8182/runtime/tasks/8"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
    </para>
    </section>

  <section>
      <title>更新任务</title>
        <para>
          <programlisting>PUT runtime/tasks/{taskId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
  "assignee" : "assignee",
  "delegationState" : "resolved",
  "description" : "New task description",
  "dueDate" : "2013-04-17T13:06:02.438+02:00",
  "name" : "New task name",
  "owner" : "owner",
  "parentTaskId" : "3",
  "priority" : 20
}</programlisting>
      所有请求参数都是可选的。比如，你可以在请求体的JSON对象中只包含'assignee'属性，只更新任务的负责人，其他字段都不填。当包含的字段值为null时，任务的对应属性会被更新为null。比如：<literal>{"dueDate" : null}</literal>会清空任务的持续时间。
       </para>
        <para>
          <table>
              <title>更新任务 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示成功更新了任务。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示请求的任务正在被更新。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> 参考<literal>runtime/tasks/{taskId}</literal>的响应。
      </para>
  </section>
   <section>
      <title>操作任务</title>
        <para>
          <programlisting>POST runtime/tasks/{taskId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">完成任务 - JSON体：</emphasis>
           <programlisting>
{
  "action" : "complete",
  "variables" : ...
}</programlisting>
       完成任务。可以使用<literal>variables</literal>参数传递可选的variable数组。关于变量格式的详细信息可以参考<link linkend="restVariables">REST变量章节</link>。注意，此处忽略变量作用域，变量会设置到上级作用域，除非本地作用域应包含了同名变量。这与<literal>TaskService.completeTask(taskId, variables)</literal> 的行为是相同的。
       </para>
       <para>
         <emphasis role="bold">认领任务 - JSON体：</emphasis>
           <programlisting>
{
  "action" : "claim",
  "assignee" : "userWhoClaims"
}</programlisting>
      指定assignee认领任务。assignee是必填项。
       </para>
       <para>
         <emphasis role="bold">代理任务 - JSON体：</emphasis>
           <programlisting>
{
  "action" : "delegate",
  "assignee" : "userToDelegateTo"
}</programlisting>
      指定assignee代理任务。assignee是必填项。
       </para>
       <para>
         <emphasis role="bold">处理任务 - JSON体：</emphasis>
           <programlisting>
{
  "action" : "resolve"
}</programlisting>
处理任务代理。任务会返回给任务的原负责人（如果存在）。
       </para>
        <para>
          <table>
              <title>操作任务 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示操作成功执行。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>当请求包含了非法数据或当操作需要assignee参数时，却没有传。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示因为冲突导致无法执行操作。可能任务正在被更新，或者，在'<literal>claim</literal>'认清任务时，任务已经被其他用户认领了。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> 参考<literal>runtime/tasks/{taskId}</literal>的响应。
      </para>
  </section>
      <section>
      <title>删除任务</title>
        <para>
          <programlisting>DELETE runtime/tasks/{taskId}?cascadeHistory={cascadeHistory}&amp;deleteReason={deleteReason}</programlisting>
        </para>
        <para>
            <table>
              <title>>删除任务 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除的任务id。</entry>
                  </row>
                  <row>
                    <entry>cascadeHistory</entry>
                    <entry>False</entry>
                    <entry>Boolean</entry>
                    <entry>删除任务时是否删除对应的任务历史（如果存在）。如果没有设置这个参数，默认为false。</entry>
                  </row>
                  <row>
                    <entry>deleteReason</entry>
                    <entry>False</entry>
                    <entry>String</entry>
                    <entry>删除任务的原因。<literal>cascadeHistory</literal>为true时，忽略此参数。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>>删除任务 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到任务，并成功删除。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>403</entry>
                    <entry>表示无法删除任务，因为它是流程的一部分。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

   <section>
      <title>获得任务的变量</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/variables?scope={scope}</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>scope</entry>
                    <entry>False</entry>
                    <entry>String</entry>
                    <entry>返回的变量作用于。如果为 '<literal>local</literal>'，只返回任务本身的变量。如果为 '<literal>global</literal>'，只返回任务上级分支的变量。如果不指定这个变量，会返回所有局部和全局的变量。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得任务的变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务并返回了请求的变量。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "name" : "doubleTaskVar",
    "scope" : "local",
    "type" : "double",
    "value" : 99.99
  },
  {
    "name" : "stringProcVar",
    "scope" : "global",
    "type" : "string",
    "value" : "This is a ProcVariable"
  },

  ...

]</programlisting>

      返回JSON数组型的变量。对响应的详细介绍可以参考<link linkend="restVariables">REST变量章节</link>。
    </para>
  </section>

   <section>
      <title>获取任务的一个变量</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/variables/{variableName}?scope={scope}</programlisting>
        </para>
        <para>
            <table>
              <title>获取任务的一个变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取变量对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取变量对应的名称。</entry>
                  </row>
                  <row>
                    <entry>scope</entry>
                    <entry>False</entry>
                    <entry>String</entry>
                    <entry>返回的变量作用于。如果为 '<literal>local</literal>'，只返回任务本身的变量。如果为 '<literal>global</literal>'，只返回任务上级分支的变量。如果不指定这个变量，会返回所有局部和全局的变量。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取任务的一个变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务并返回了请求的变量。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或者任务不包含指定名称的变量（在指定作用域下）。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "myTaskVariable",
  "scope" : "local",
  "type" : "string",
  "value" : "Hello my friend"
}</programlisting>

	  对响应的详细介绍可以参考<link linkend="restVariables">REST变量章节</link>。
    </para>
  </section>

  <section>
      <title>获取变量的二进制数据</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/variables/{variableName}/data?scope={scope}</programlisting>
        </para>
        <para>
            <table>
              <title>获取变量的二进制数据 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取变量数据对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取数据对应的变量名称。只能使用 <literal>binary</literal> 和 <literal>serializable</literal> 类型的变量。如果使用了其他类型的变量，会返回 <literal>404</literal> 。</entry>
                  </row>
                  <row>
                    <entry>scope</entry>
                    <entry>False</entry>
                    <entry>String</entry>
                    <entry>返回的变量作用于。如果为 '<literal>local</literal>'，只返回任务本身的变量。如果为 '<literal>global</literal>'，只返回任务上级分支的变量。如果不指定这个变量，会返回所有局部和全局的变量。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取变量的二进制数据 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务并返回了请求的变量。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或者任务不包含指定名称的变量（在指定作用域下），或变量的二进制流不可用。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">成功响应体：</emphasis>
	  响应体包含了变量的二进制值。当类型为 <literal>binary</literal>时，无论请求的accept-type头部设置了什么值，响应的content-type都为<literal>application/octet-stream</literal>。当类型为 <literal>serializable</literal>时， content-type为<literal>application/x-java-serialized-object</literal>。
    </para>
  </section>

  <section>
      <title>创建任务变量</title>
        <para>
          <programlisting>POST runtime/tasks/{taskId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>创建任务变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建新变量对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">创建简单（非二进制）变量的请求体：</emphasis>
            <programlisting>
[
  {
    "name" : "myTaskVariable",
    "scope" : "local",
    "type" : "string",
    "value" : "Hello my friend"
  },
  {
    ...
  }
]</programlisting>
请求体应该是包含一个或多个JSON对象的数组，对应应该创建的变量。
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>scope</literal>:创建的变量的作用域。如果忽略，假设为<literal>local</literal>。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量的类型。如果忽略，转换为对应的JSON的类型 (string, boolean, integer 或 double)。</para>
          </listitem>
          <listitem>
            <para><literal>value</literal>：变量值。</para>
          </listitem>
      </itemizedlist>
      关于变量格式的详细信息可以参考<link linkend="restVariables">REST变量章节</link>。
        </para>
        <para>
        <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "name" : "myTaskVariable",
    "scope" : "local",
    "type" : "string",
    "value" : "Hello my friend"
  },
  {
    ...
  }
]</programlisting>
          <table>
              <title>创建任务变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示创建了变量，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有传变量名，或尝试使用<literal>global</literal>作用域为独立任务（没有关联到流程）创建变量，或请求中的变量为空，或请求没有包含变量数组。状态信息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示任务已经存在指定名称的变量了。可以使用PUT方法来更新任务变量。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
   <section>
      <title>创建二进制任务变量</title>
        <para>
          <programlisting>POST runtime/tasks/{taskId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>创建二进制任务变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建新变量对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>scope</literal>：创建的变量的作用域。如果忽略，假设使用 <literal>local</literal>。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/tasks/123/variables/binaryVariable/data"
}</programlisting>
          <table>
              <title>创建二进制任务变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示创建了变量，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有传变量名，或尝试使用<literal>global</literal>作用域为独立任务（没有关联到流程）创建变量。状态信息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示任务已经存在指定名称的变量了。可以使用PUT方法来更新任务变量。</entry>
                  </row>
                  <row>
                    <entry>415</entry>
                    <entry>表示序列化数据包含的对象的类并不在运行Activiti引擎的JVM中，所以无法反序列化。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
   <section>
      <title>更新任务的一个已有变量</title>
        <para>
          <programlisting>PUT runtime/tasks/{taskId}/variables/{variableName}</programlisting>
        </para>
        <para>
            <table>
              <title>更新任务的一个已有变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量名称。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">更新简单（非二进制）变量的请求体：</emphasis>
            <programlisting>
{
  "name" : "myTaskVariable",
  "scope" : "local",
  "type" : "string",
  "value" : "Hello my friend"
}</programlisting>
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>scope</literal>：更新的变量的作用域。如果忽略，假设为<literal>local</literal>。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：更新的变量的类型。如果忽略，转换为对应的JSON的类型 (string, boolean, integer 或 double)。</para>
          </listitem>
          <listitem>
            <para><literal>value</literal>：变量值。</para>
          </listitem>
      </itemizedlist>
      关于变量格式的详细信息可以参考<link linkend="restVariables">REST变量章节</link>。
        </para>
        <para>
        <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "myTaskVariable",
  "scope" : "local",
  "type" : "string",
  "value" : "Hello my friend"
}</programlisting>
          <table>
              <title>更新任务的一个已有变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示成功更新了变量并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有传变量名，或尝试使用<literal>global</literal>作用域为独立任务（没有关联到流程）创建变量。状态信息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务在指定作用域不包含指定名称的变量。状态信息包含错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>更新一个二进制任务变量</title>
        <para>
          <programlisting>PUT runtime/tasks/{taskId}/variables/{variableName}</programlisting>
        </para>
        <para>
            <table>
              <title>更新一个二进制任务变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量名称。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>scope</literal>：创建的变量的作用域。如果忽略，假设使用 <literal>local</literal>。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/tasks/123/variables/binaryVariable/data"
}</programlisting>
          <table>
              <title>更新一个二进制任务变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示更新了变量，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有传变量名，或尝试使用<literal>global</literal>作用域为独立任务（没有关联到流程）创建变量。状态信息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务在指定作用域不包含指定名称的变量。</entry>
                  </row>
                  <row>
                    <entry>415</entry>
                    <entry>表示序列化数据包含的对象的类并不在运行Activiti引擎的JVM中，所以无法反序列化。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>删除任务变量</title>
        <para>
          <programlisting>DELETE runtime/tasks/{taskId}/variables/{variableName}?scope={scope}</programlisting>
        </para>
        <para>
            <table>
              <title>删除任务变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除的变量对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除的变量名称。</entry>
                  </row>
                  <row>
                    <entry>scope</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>希望删除的变量的作用域。可以是<literal>local</literal> 或 <literal>global</literal>。如果忽略，假设为<literal>local</literal>。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>删除任务变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了任务变量，并成功删除。响应体为空。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务不包含指定名称的变量。状态信息包含错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>删除任务的所有局部变量</title>
        <para>
          <programlisting>DELETE runtime/tasks/{taskId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>删除任务的所有局部变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除的变量对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>删除任务的所有局部变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示已经删除了任务的所有局部变量。响应体为空。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获得任务的所有IdentityLink</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/identitylinks</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的所有IdentityLink - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望获得IdentityLink对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得任务的所有IdentityLink - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务，并返回了IdentityLink。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "userId" : "kermit",
    "groupId" : null,
    "type" : "candidate",
    "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/identitylinks/users/kermit/candidate"
  },
  {
    "userId" : null,
    "groupId" : "sales",
    "type" : "candidate",
    "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/identitylinks/groups/sales/candidate"
  },

  ...
]</programlisting>
    </para>
  </section>

   <section>
      <title>获得一个任务的所有组或用户的IdentityLink</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/identitylinks/users
GET runtime/tasks/{taskId}/identitylinks/groups</programlisting>
        </para>
        <para>
		返回对应于用户或组的IdentityLink。响应体与状态码与获得一个任务的所有IdentityLink完全一样。
        </para>
  </section>
  <section>
  <title>获得一个任务的一个IdentityLink</title>
      <para>
        <programlisting>GET runtime/tasks/{taskId}/identitylinks/{family}/{identityId}/{type}</programlisting>
      </para>
      <para>
          <table>
            <title>获得一个任务的所有组或用户的IdentityLink - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>taskId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>任务的id。</entry>
                </row>
                <row>
                  <entry>family</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry><literal>groups</literal> 或 <literal>users</literal>，对应期望获得哪种IdentityLink。</entry>
                </row>
                <row>
                  <entry>identityId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>IdentityLink的id。</entry>
                </row>
                <row>
                  <entry>type</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>IdentityLink的类型。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>获得一个任务的所有组或用户的IdentityLink - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示找到了任务和IdentityLink，并成功返回。</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>表示找不到任务，或任务不包含请求的IdentityLink。状态包含了错误的详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "userId" : null,
  "groupId" : "sales",
  "type" : "candidate",
  "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/identitylinks/groups/sales/candidate"
}</programlisting>
  </para>
</section>

  <section>
    <title>为任务创建一个IdentityLink</title>
      <para>
        <programlisting>POST runtime/tasks/{taskId}/identitylinks</programlisting>
      </para>
      <para>
          <table>
            <title>为任务创建一个IdentityLink - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>taskId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>任务的id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
       <emphasis role="bold">请求体（用户）：</emphasis>
            <programlisting>
{
  "userId" : "kermit",
  "type" : "candidate",
}</programlisting>
    </para>
    <para>
       <emphasis role="bold">请求体（组）：</emphasis>
            <programlisting>
{
  "groupId" : "sales",
  "type" : "candidate",
}</programlisting>
    </para>
      <para>
        <table>
            <title>为任务创建一个IdentityLink - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>201</entry>
                  <entry>表示找到了任务，并创建了IdentityLink。</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>表示找不到任务，或任务不包含请求的IdentityLink。状态包含了错误的详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "userId" : null,
  "groupId" : "sales",
  "type" : "candidate",
  "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/identitylinks/groups/sales/candidate"
}</programlisting>
    </para>
    </section>


     <section>
      <title>删除任务的一个IdentityLink</title>
         <para>
        <programlisting>DELETE runtime/tasks/{taskId}/identitylinks/{family}/{identityId}/{type}</programlisting>
      </para>
      <para>
          <table>
            <title>删除任务的一个IdentityLink - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>taskId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>任务的id。</entry>
                </row>
                <row>
                  <entry>family</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry><literal>groups</literal> 或 <literal>users</literal>，对应IdentityLink的种类。</entry>
                </row>
                <row>
                  <entry>identityId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>IdentityLink的id。</entry>
                </row>
                <row>
                  <entry>type</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>IdentityLink的类型。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <table>
              <title>删除任务的一个IdentityLink - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了任务和IdentityLInk，并成功删除了IdentityLink。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务不包含请求的IdentityLink。状态包含了错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>为任务创建评论</title>
        <para>
          <programlisting>POST runtime/tasks/{taskId}/comments</programlisting>
        </para>
        <para>
            <table>
              <title>为任务创建评论 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建评论对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
        <programlisting>
{
  "message" : "This is a comment on the task."
}</programlisting>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id" : "123",
  "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/comments/123",
  "message" : "This is a comment on the task.",
  "author" : "kermit"
}</programlisting>
          <table>
              <title>为任务创建评论 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示创建了评论，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求不包含评论。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获得任务的所有评论</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/comments</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的所有评论 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取评论对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "id" : "123",
    "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/comments/123",
    "message" : "This is a comment on the task.",
    "author" : "kermit"
  },
  {
    "id" : "456",
    "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/comments/456",
    "message" : "This is another comment on the task.",
    "author" : "gonzo"
  }
]</programlisting>
          <table>
              <title>获得任务的所有评论 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务，并返回了评论。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获得任务的一个评论</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/comments/{commentId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的一个评论 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取评论对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>commentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>评论的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id" : "123",
  "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/comments/123",
  "message" : "This is a comment on the task.",
  "author" : "kermit"
}</programlisting>
          <table>
              <title>获得任务的一个评论 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务和评论，并返回了评论。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务不包含指定id的评论。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>删除任务的一条评论</title>
        <para>
          <programlisting>DELETE runtime/tasks/{taskId}/comments/{commentId}</programlisting>
        </para>
        <para>
            <table>
              <title>删除任务的一条评论 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>删除评论对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>commentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>评论的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <table>
            <title>删除任务的一条评论 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>204</entry>
                  <entry>表示找到了任务和评论，并删除了评论。响应体为空。</entry>
                </row>
                <row>
                  <entry>404</entry>
					  <entry>表示找不到任务，或任务不包含id的评论。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
  </section>
    <section>
      <title>获得任务的所有事件</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/events</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的所有事件 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获得事件对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "action" : "AddUserLink",
    "id" : "4",
    "message" : [ "gonzo", "contributor" ],
    "taskUrl" : "http://localhost:8182/runtime/tasks/2",
    "time" : "2013-05-17T11:50:50.000+0000",
    "url" : "http://localhost:8182/runtime/tasks/2/events/4",
    "userId" : null
  },

  ...

]</programlisting>
          <table>
              <title>获得任务的所有事件 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务，并返回了事件。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获得任务的一个事件</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/events/{eventId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的一个事件 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获得事件对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>eventId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>事件的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "action" : "AddUserLink",
  "id" : "4",
  "message" : [ "gonzo", "contributor" ],
  "taskUrl" : "http://localhost:8182/runtime/tasks/2",
  "time" : "2013-05-17T11:50:50.000+0000",
  "url" : "http://localhost:8182/runtime/tasks/2/events/4",
  "userId" : null
}</programlisting>
          <table>
              <title>获得任务的一个事件 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务和事件，并返回了事件。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务不包含对应id的事件。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>


    <section>
      <title>为任务创建一个附件，包含外部资源的链接</title>
        <para>
          <programlisting>POST runtime/tasks/{taskId}/attachments</programlisting>
        </para>
        <para>
            <table>
              <title>为任务创建一个附件，包含外部资源的链接 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建附件对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
        <programlisting>
{
  "name":"Simple attachment",
  "description":"Simple attachment description",
  "type":"simpleType",
  "externalUrl":"http://activiti.org"
}</programlisting>
创建附件只有name是必填的。
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id":"3",
  "url":"http://localhost:8182/runtime/tasks/2/attachments/3",
  "name":"Simple attachment",
  "description":"Simple attachment description",
  "type":"simpleType",
  "taskUrl":"http://localhost:8182/runtime/tasks/2",
  "processInstanceUrl":null,
  "externalUrl":"http://activiti.org",
  "contentUrl":null
}</programlisting>
          <table>
              <title>为任务创建一个附件，包含外部资源的链接 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示创建了附件，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求中缺少了附件名称。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
  <title>为任务创建一个附件，包含附件文件</title>
        <para>
          <programlisting>POST runtime/tasks/{taskId}/attachments</programlisting>
        </para>
        <para>
            <table>
              <title>为任务创建一个附件，包含附件文件 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建附件对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>description</literal>：附件的描述，可选。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
      "id":"5",
      "url":"http://localhost:8182/runtime/tasks/2/attachments/5",
      "name":"Binary attachment",
      "description":"Binary attachment description",
      "type":"binaryType",
      "taskUrl":"http://localhost:8182/runtime/tasks/2",
      "processInstanceUrl":null,
      "externalUrl":null,
      "contentUrl":"http://localhost:8182/runtime/tasks/2/attachments/5/content"
   }</programlisting>
          <table>
              <title>为任务创建一个附件，包含附件文件 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示创建了附件，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求中缺少附件名称，或请求中未包含文件。错误信息中包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获得任务的所有附件</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/attachments</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的所有附件 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取附件对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "id":"3",
    "url":"http://localhost:8182/runtime/tasks/2/attachments/3",
    "name":"Simple attachment",
    "description":"Simple attachment description",
    "type":"simpleType",
    "taskUrl":"http://localhost:8182/runtime/tasks/2",
    "processInstanceUrl":null,
    "externalUrl":"http://activiti.org",
    "contentUrl":null
  },
  {
    "id":"5",
    "url":"http://localhost:8182/runtime/tasks/2/attachments/5",
    "name":"Binary attachment",
    "description":"Binary attachment description",
    "type":"binaryType",
    "taskUrl":"http://localhost:8182/runtime/tasks/2",
    "processInstanceUrl":null,
    "externalUrl":null,
    "contentUrl":"http://localhost:8182/runtime/tasks/2/attachments/5/content"
  }
]</programlisting>
          <table>
              <title>获得任务的所有附件 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务，并返回了附件。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获得任务的一个附件</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/attachments/{attachmentId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的一个附件 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取附件对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>attachmentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>附件的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
  {
    "id":"5",
    "url":"http://localhost:8182/runtime/tasks/2/attachments/5",
    "name":"Binary attachment",
    "description":"Binary attachment description",
    "type":"binaryType",
    "taskUrl":"http://localhost:8182/runtime/tasks/2",
    "processInstanceUrl":null,
    "externalUrl":null,
    "contentUrl":"http://localhost:8182/runtime/tasks/2/attachments/5/content"
  }</programlisting>
  <itemizedlist>
    <listitem>
      <para>
        <literal>externalUrl - contentUrl：</literal>如果附件是一个外部资源链接，<literal>externalUrl</literal>包含外部内容的URL。如果附件内容保存在Activiti引擎中，<literal>contentUrl</literal>会包含获取二进制流内容的URL。
      </para>
    </listitem>
    <listitem>
      <para>
        <literal>type：</literal>可以是任何有效值。包含一个格式合法的media-type时（比如application/xml, text/plain），二进制HTTP响应的content-type会被设置为对应值。
      </para>
    </listitem>
  </itemizedlist>

        </para>
        <para>
          <table>
              <title>获得任务的一个附件 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务和附件，并返回了附件。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务不包含对应id的附件。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获取附件的内容</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/attachment/{attachmentId}/content</programlisting>
        </para>
        <para>
            <table>
              <title>获取附件的内容 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取附件数据对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>attachmentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>附件的id，当附件指向外部URL，而不是Activiti中的内容，就会返回<literal>404</literal>。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取附件的内容 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务和附件，并返回了请求的内容。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务不包含对应id的任务，或附件不包含二进制流。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">成功响应体：</emphasis>
      响应体包含了二进制内容。默认，响应的content-type设置为<literal>application/octet-stream</literal>，除非附件类型包含了合法的Content-Type。
    </para>
  </section>
  <section>
      <title>删除任务的一个附件</title>
        <para>
          <programlisting>DELETE runtime/tasks/{taskId}/attachments/{attachmentId}</programlisting>
        </para>
        <para>
            <table>
              <title>删除任务的一个附件 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除附件对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>attachmentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>附件的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <table>
            <title>删除任务的一个附件 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>204</entry>
                  <entry>表示找到了任务和附件，并删除了附件。响应体为空。</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>表示找不到任务，或任务不包含对应id的附件。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
  </section>
</section>
<section>
  <title>History</title>
  <section>
    <title>Get a historic process instance</title>
    <para>
      <programlisting>GET history/historic-process-instances/{processInstanceId}</programlisting>
    </para>
    <para>
      <table>
          <title>Get a historic process instance - 响应码</title>
          <tgroup cols='2'>
            <thead>
              <row>
                <entry>Response code</entry>
                <entry>Description</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry>200</entry>
                <entry>Indicates that the historic process instances could be found.</entry>
              </row>
              <row>
                <entry>404</entry>
                <entry>Indicates that the historic process instances could not be found.</entry>
              </row>
            </tbody>
         </tgroup>
      </table>
    </para>
    <para>
      <emphasis role="bold">成功响应体：</emphasis>
        <programlisting>
{
  "data": [
    {
      "id" : "5",
      "businessKey" : "myKey",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "startUserId" : "kermit",
      "startActivityId" : "startEvent",
      "endActivityId" : "endEvent",
      "deleteReason" : null,
      "superProcessInstanceId" : "3",
      "url" : "http://localhost:8182/history/historic-process-instances/5",
      "variables": null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section id="restHistoricProcessInstancesGet">
    <title>List of historic process instances</title>
      <para>
        <programlisting>GET history/historic-process-instances</programlisting>
      </para>
      <para>
          <table>
            <title>List of historic process instances - URL参数</title>
            <tgroup cols='4'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>processInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>An id of the historic process instance.</entry>
                </row>
                <row>
                  <entry>processDefinitionKey</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The process definition key of the historic process instance.</entry>
                </row>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The process definition id of the historic process instance.</entry>
                </row>
                <row>
                  <entry>businessKey</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The business key of the historic process instance.</entry>
                </row>
                <row>
                  <entry>involvedUser</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>An involved user of the historic process instance.</entry>
                </row>
                <row>
                  <entry>finished</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>Indication if the historic process instance is finished.</entry>
                </row>
                <row>
                  <entry>superProcessInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>An optional parent process id of the historic process instance.</entry>
                </row>
                <row>
                  <entry>excludeSubprocesses</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>Return only historic process instances which aren't sub processes.</entry>
                </row>
                <row>
                  <entry>finishedAfter</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>Return only historic process instances that were finished after this date.</entry>
                </row>
                <row>
                  <entry>finishedBefore</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>Return only historic process instances that were finished before this date.</entry>
                </row>
                <row>
                  <entry>startedAfter</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>Return only historic process instances that were started after this date.</entry>
                </row>
                <row>
                  <entry>startedBefore</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>Return only historic process instances that were started before this date.</entry>
                </row>
                <row>
                  <entry>startedBy</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>Return only historic process instances that were started by this user.</entry>
                </row>
                <row>
                  <entry>includeProcessVariables</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>An indication if the historic process instance variables should be returned as well.</entry>
                </row>
                <row>
                  <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>List of historic process instances - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates that historic process instances could be queried.</entry>
                </row>
                <row>
                  <entry>400</entry>
                  <entry>Indicates an parameter was passed in the wrong format. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "5",
      "businessKey" : "myKey",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "startUserId" : "kermit",
      "startActivityId" : "startEvent",
      "endActivityId" : "endEvent",
      "deleteReason" : null,
      "superProcessInstanceId" : "3",
      "url" : "http://localhost:8182/history/historic-process-instances/5",
      "variables": [
        {
          "name": "test",
          "variableScope": "local",
          "value": "myTest"
        }
      ]
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>Query for historic process instances</title>
      <para>
        <programlisting>POST query/historic-process-instances</programlisting>
      </para>
      <para>
        <emphasis role="bold">请求体：</emphasis>
        <programlisting>
{
  "processDefinitionId" : "oneTaskProcess%3A1%3A4",
  ...

  "variables" : [
    {
      "name" : "myVariable",
      "value" : 1234,
      "operator" : "equals",
      "type" : "long"
    }
  ]
}</programlisting>
      </para>
      <para>
        All supported JSON parameter fields allowed are exactly the same as the parameters found for <link linkend="restHistoricProcessInstancesGet">getting a collection of historic process instances</link>, but passed in as JSON-body arguments rather than URL-parameters to allow for more advanced querying and preventing errors with request-uri's that are too long. On top of that, the query allows
        for filtering based on process variables. The <literal>variables</literal> property is a json-array containing objects with the format <link linkend="restQueryVariable"> as described here.</link>
      </para>
      <para>
        <table>
            <title>Query for historic process instances - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示请求成功，并返回任务。</entry>
                </row>
                 <row>
                  <entry>400</entry>
                  <entry>Indicates an parameter was passed in the wrong format. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "5",
      "businessKey" : "myKey",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "startUserId" : "kermit",
      "startActivityId" : "startEvent",
      "endActivityId" : "endEvent",
      "deleteReason" : null,
      "superProcessInstanceId" : "3",
      "url" : "http://localhost:8182/history/historic-process-instances/5",
      "variables": [
        {
          "name": "test",
          "variableScope": "local",
          "value": "myTest"
        }
      ]
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>Delete a historic process instance</title>
      <para>
        <programlisting>DELETE history/historic-process-instances/{processInstanceId}</programlisting>
      </para>
      <para>
        <table>
            <title>响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates that the historic process instance was deleted.</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>Indicates that the historic process instance could not be found.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    </section>
    <section>
      <title>Get the identity links of a historic process instance</title>
      <para>
        <programlisting>GET history/historic-process-instance/{processInstanceId}/identitylinks</programlisting>
      </para>
      <para>
        <table>
            <title>响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates request was successful and the identity links are returned</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>Indicates the process instance could not be found.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
[
 {
  "type" : "participant",
  "userId" : "kermit",
  "groupId" : null,
  "taskId" : null,
  "taskUrl" : null,
  "processInstanceId" : "5",
  "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5"
 }
]</programlisting>
      </para>
    </section>
    <section>
      <title>Get the binary data for a historic process instance variable</title>
      <para>
        <programlisting>GET history/historic-process-instances/{processInstanceId}/variables/{variableName}/data</programlisting>
      </para>
      <para>
        <table>
            <title>Get the binary data for a historic process instance variable - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates the process instance was found and the requested variable data is returned.</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>Indicates the requested process instance was not found or the process instance doesn't have a variable with the given name or the variable doesn't have a binary stream available. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
      <emphasis role="bold">成功响应体：</emphasis>
      The response body contains the binary value of the variable. When the variable is of type <literal>binary</literal>, the content-type of the response is set to <literal>application/octet-stream</literal>, regardless of the content of the variable or the request accept-type header. In case of <literal>serializable</literal>, <literal>application/x-java-serialized-object</literal> is used as content-type.
    </para>
  </section>
    <section>
    <title>Get a single historic task instance</title>
    <para>
      <programlisting>GET history/historic-task-instances/{taskId}</programlisting>
    </para>
    <para>
      <table>
          <title>Get a single historic task instance - 响应码</title>
          <tgroup cols='2'>
            <thead>
              <row>
                <entry>Response code</entry>
                <entry>Description</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry>200</entry>
                <entry>Indicates that the historic task instances could be found.</entry>
              </row>
              <row>
                <entry>404</entry>
                <entry>Indicates that the historic task instances could not be found.</entry>
              </row>
            </tbody>
         </tgroup>
      </table>
    </para>
    <para>
      <emphasis role="bold">成功响应体：</emphasis>
        <programlisting>
{
  "id" : "5",
  "processDefinitionId" : "oneTaskProcess%3A1%3A4",
  "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
  "processInstanceId" : "3",
  "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
  "executionId" : "4",
  "name" : "My task name",
  "description" : "My task description",
  "deleteReason" : null,
  "owner" : "kermit",
  "assignee" : "fozzie",
  "startTime" : "2013-04-17T10:17:43.902+0000",
  "endTime" : "2013-04-18T14:06:32.715+0000",
  "durationInMillis" : 86400056,
  "workTimeInMillis" : 234890,
  "claimTime" : "2013-04-18T11:01:54.715+0000",
  "taskDefinitionKey" : "taskKey",
  "formKey" : null,
  "priority" : 50,
  "dueDate" : "2013-04-20T12:11:13.134+0000",
  "parentTaskId" : null,
  "url" : "http://localhost:8182/history/historic-task-instances/5",
  "variables": null
}</programlisting>
      </para>
    </section>
    <section id="restHistoricTaskInstancesGet">
      <title>Get historic task instances</title>
      <para>
        <programlisting>GET history/historic-task-instances</programlisting>
      </para>
      <para>
          <table>
            <title>Get historic task instances - URL参数</title>
            <tgroup cols='4'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>taskId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>An id of the historic task instance.</entry>
                </row>
                <row>
                  <entry>processInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The process instance id of the historic task instance.</entry>
                </row>
                <row>
                  <entry>processDefinitionKey</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The process definition key of the historic task instance.</entry>
                </row>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The process definition id of the historic task instance.</entry>
                </row>
                <row>
                  <entry>processDefinitionName</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The process definition name of the historic task instance.</entry>
                </row>
                <row>
                  <entry>processBusinessKey</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The process instance business key of the historic task instance.</entry>
                </row>
                <row>
                  <entry>executionId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The execution id of the historic task instance.</entry>
                </row>
                <row>
                  <entry>taskName</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The task name of the historic task instance.</entry>
                </row>
                <row>
                  <entry>taskNameLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The task name with 'like' operator for the historic task instance.</entry>
                </row>
                <row>
                  <entry>taskDescription</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The task description of the historic task instance.</entry>
                </row>
                <row>
                  <entry>taskDescriptionLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The task description with 'like' operator for the historic task instance.</entry>
                </row>
                <row>
                  <entry>taskDefinitionKey</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The task identifier from the process definition for the historic task instance.</entry>
                </row>
                <row>
                  <entry>taskDeleteReason</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The task delete reason of the historic task instance.</entry>
                </row>
                <row>
                  <entry>taskDeleteReasonLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The task delete reason with 'like' operator for the historic task instance.</entry>
                </row>
                <row>
                  <entry>taskAssignee</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The assignee of the historic task instance.</entry>
                </row>
                <row>
                  <entry>taskAssigneeLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The assignee with 'like' operator for the historic task instance.</entry>
                </row>
                <row>
                  <entry>taskOwner</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The owner of the historic task instance.</entry>
                </row>
                <row>
                  <entry>taskOwnerLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The owner with 'like' operator for the historic task instance.</entry>
                </row>
                <row>
                  <entry>taskInvolvedUser</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>An involved user of the historic task instance.</entry>
                </row>
                <row>
                  <entry>taskPriority</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The priority of the historic task instance.</entry>
                </row>
                <row>
                  <entry>finished</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>Indication if the historic task instance is finished.</entry>
                </row>
                <row>
                  <entry>processFinished</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>Indication if the process instance of the historic task instance is finished.</entry>
                </row>
                <row>
                  <entry>parentTaskId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>An optional parent task id of the historic task instance.</entry>
                </row>
                <row>
                  <entry>dueDate</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>Return only historic task instances that have a due date equal this date.</entry>
                </row>
                <row>
                  <entry>dueDateAfter</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>Return only historic task instances that have a due date after this date.</entry>
                </row>
                <row>
                  <entry>dueDateBefore</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>Return only historic task instances that have a due date before this date.</entry>
                </row>
                <row>
                  <entry>taskCreatedOn</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>Return only historic task instances that were created on this date.</entry>
                </row>
                <row>
                  <entry>includeTaskLocalVariables</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>An indication if the historic task instance local variables should be returned as well.</entry>
                </row>
                <row>
                  <entry>includeProcessVariables</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>An indication if the historic task instance global variables should be returned as well.</entry>
                </row>
                <row>
                  <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>Get historic task instances - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates that historic process instances could be queried.</entry>
                </row>
                <row>
                  <entry>400</entry>
                  <entry>Indicates an parameter was passed in the wrong format. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "5",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstanceId" : "3",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
      "executionId" : "4",
      "name" : "My task name",
      "description" : "My task description",
      "deleteReason" : null,
      "owner" : "kermit",
      "assignee" : "fozzie",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "workTimeInMillis" : 234890,
      "claimTime" : "2013-04-18T11:01:54.715+0000",
      "taskDefinitionKey" : "taskKey",
      "formKey" : null,
      "priority" : 50,
      "dueDate" : "2013-04-20T12:11:13.134+0000",
      "parentTaskId" : null,
      "url" : "http://localhost:8182/history/historic-task-instances/5",
      "taskVariables": [
        {
          "name": "test",
          "variableScope": "local",
          "value": "myTest"
        }
      ],
      "processVariables": [
        {
          "name": "processTest",
          "variableScope": "global",
          "value": "myProcessTest"
        }
      ]
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>Query for historic task instances</title>
      <para>
        <programlisting>POST query/historic-task-instances</programlisting>
      </para>
      <para>
        <emphasis role="bold">Query for historic task instances - Request body:</emphasis>
        <programlisting>
{
  "processDefinitionId" : "oneTaskProcess%3A1%3A4",
  ...

  "variables" : [
    {
      "name" : "myVariable",
      "value" : 1234,
      "operator" : "equals",
      "type" : "long"
    }
  ]
}</programlisting>
      </para>
      <para>
        All supported JSON parameter fields allowed are exactly the same as the parameters found for <link linkend="restHistoricTaskInstancesGet">getting a collection of historic task instances</link>, but passed in as JSON-body arguments rather than URL-parameters to allow for more advanced querying and preventing errors with request-uri's that are too long. On top of that, the query allows
        for filtering based on process variables. The <literal>taskVariables</literal> and <literal>processVariables</literal> properties are json-arrays containing objects with the format <link linkend="restQueryVariable"> as described here.</link>
      </para>
      <para>
        <table>
            <title>Query for historic task instances - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示请求成功，并返回任务。</entry>
                </row>
                 <row>
                  <entry>400</entry>
                  <entry>Indicates an parameter was passed in the wrong format. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "5",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstanceId" : "3",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
      "executionId" : "4",
      "name" : "My task name",
      "description" : "My task description",
      "deleteReason" : null,
      "owner" : "kermit",
      "assignee" : "fozzie",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "workTimeInMillis" : 234890,
      "claimTime" : "2013-04-18T11:01:54.715+0000",
      "taskDefinitionKey" : "taskKey",
      "formKey" : null,
      "priority" : 50,
      "dueDate" : "2013-04-20T12:11:13.134+0000",
      "parentTaskId" : null,
      "url" : "http://localhost:8182/history/historic-task-instances/5",
      "taskVariables": [
        {
          "name": "test",
          "variableScope": "local",
          "value": "myTest"
        }
      ],
      "processVariables": [
        {
          "name": "processTest",
          "variableScope": "global",
          "value": "myProcessTest"
        }
      ]
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>Delete a historic task instance</title>
      <para>
        <programlisting>DELETE history/historic-task-instances/{taskId}</programlisting>
      </para>
      <para>
        <table>
            <title>响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates that the historic task instance was deleted.</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>Indicates that the historic task instance could not be found.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    </section>
    <section>
      <title>Get the identity links of a historic task instance</title>
      <para>
        <programlisting>GET history/historic-task-instance/{taskId}/identitylinks</programlisting>
      </para>
      <para>
        <table>
            <title>响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates request was successful and the identity links are returned</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>Indicates the task instance could not be found.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
[
 {
  "type" : "assignee",
  "userId" : "kermit",
  "groupId" : null,
  "taskId" : "6",
  "taskUrl" : "http://localhost:8182/history/historic-task-instances/5",
  "processInstanceId" : null,
  "processInstanceUrl" : null
 }
]</programlisting>
      </para>
    </section>
    <section>
      <title>Get the binary data for a historic task instance variable</title>
      <para>
        <programlisting>GET history/historic-task-instances/{taskId}/variables/{variableName}/data</programlisting>
      </para>
      <para>
        <table>
            <title>Get the binary data for a historic task instance variable - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates the task instance was found and the requested variable data is returned.</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>Indicates the requested task instance was not found or the process instance doesn't have a variable with the given name or the variable doesn't have a binary stream available. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
        The response body contains the binary value of the variable. When the variable is of type <literal>binary</literal>, the content-type of the response is set to <literal>application/octet-stream</literal>, regardless of the content of the variable or the request accept-type header. In case of <literal>serializable</literal>, <literal>application/x-java-serialized-object</literal> is used as content-type.
      </para>
    </section>
    <section id="restHistoricActivityInstancesGet">
      <title>Get historic activity instances</title>
      <para>
        <programlisting>GET history/historic-activity-instances</programlisting>
      </para>
      <para>
          <table>
            <title>Get historic activity instances - URL参数</title>
            <tgroup cols='4'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>activityId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>An id of the activity instance.</entry>
                </row>
                <row>
                  <entry>activityInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>An id of the historic activity instance.</entry>
                </row>
                <row>
                  <entry>activityName</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The name of the historic activity instance.</entry>
                </row>
                <row>
                  <entry>activityType</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The element type of the historic activity instance.</entry>
                </row>
                <row>
                  <entry>executionId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The execution id of the historic activity instance.</entry>
                </row>
                <row>
                  <entry>finished</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>Indication if the historic activity instance is finished.</entry>
                </row>
                <row>
                  <entry>taskAssignee</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The assignee of the historic activity instance.</entry>
                </row>
                <row>
                  <entry>processInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The process instance id of the historic activity instance.</entry>
                </row>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The process definition id of the historic activity instance.</entry>
                </row>
                <row>
                  <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>Get historic activity instances - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates that historic activity instances could be queried.</entry>
                </row>
                <row>
                  <entry>400</entry>
                  <entry>Indicates an parameter was passed in the wrong format. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "5",
      "activityId" : "4",
      "activityName" : "My user task",
      "activityType" : "userTask",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstanceId" : "3",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
      "executionId" : "4",
      "taskId" : "4",
      "calledProcessInstanceId" : null,
      "assignee" : "fozzie",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>Query for historic activity instances</title>
      <para>
        <programlisting>POST query/historic-activity-instances</programlisting>
      </para>
      <para>
        <emphasis role="bold">请求体：</emphasis>
        <programlisting>
{
  "processDefinitionId" : "oneTaskProcess%3A1%3A4"
}</programlisting>
      </para>
      <para>
        All supported JSON parameter fields allowed are exactly the same as the parameters found for <link linkend="restHistoricTaskInstancesGet">getting a collection of historic task instances</link>, but passed in as JSON-body arguments rather than URL-parameters to allow for more advanced querying and preventing errors with request-uri's that are too long.
      </para>
      <para>
        <table>
            <title>Query for historic activity instances - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates request was successful and the activities are returned</entry>
                </row>
                 <row>
                  <entry>400</entry>
                  <entry>Indicates an parameter was passed in the wrong format. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "5",
      "activityId" : "4",
      "activityName" : "My user task",
      "activityType" : "userTask",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstanceId" : "3",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
      "executionId" : "4",
      "taskId" : "4",
      "calledProcessInstanceId" : null,
      "assignee" : "fozzie",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section id="restHistoricVariableInstancesGet">
      <title>List of historic variable instances</title>
      <para>
        <programlisting>GET history/historic-variable-instances</programlisting>
      </para>
      <para>
          <table>
            <title>List of historic variable instances - URL参数</title>
            <tgroup cols='4'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>processInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The process instance id of the historic variable instance.</entry>
                </row>
                <row>
                  <entry>taskId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The task id of the historic variable instance.</entry>
                </row>
                <row>
                  <entry>excludeTaskVariables</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>Indication to exclude the task variables from the result.</entry>
                </row>
                <row>
                  <entry>variableName</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The variable name of the historic variable instance.</entry>
                </row>
                <row>
                  <entry>variableNameLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The variable name using the 'like' operator for the historic variable instance.</entry>
                </row>
                <row>
                  <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>List of historic variable instances - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates that historic variable instances could be queried.</entry>
                </row>
                <row>
                  <entry>400</entry>
                  <entry>Indicates an parameter was passed in the wrong format. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "14",
      "processInstanceId" : "5",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5",
      "taskId" : "6",
      "variable" : {
        "name" : "myVariable",
        "variableScope", "global",
        "value" : "test"
      }
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>Query for historic variable instances</title>
      <para>
        <programlisting>POST query/historic-variable-instances</programlisting>
      </para>
      <para>
        <emphasis role="bold">请求体：</emphasis>
        <programlisting>
{
  "processDefinitionId" : "oneTaskProcess%3A1%3A4",
  ...

  "variables" : [
    {
      "name" : "myVariable",
      "value" : 1234,
      "operator" : "equals",
      "type" : "long"
    }
  ]
}</programlisting>
      </para>
      <para>
        All supported JSON parameter fields allowed are exactly the same as the parameters found for <link linkend="restHistoricVariableInstancesGet">getting a collection of historic process instances</link>, but passed in as JSON-body arguments rather than URL-parameters to allow for more advanced querying and preventing errors with request-uri's that are too long. On top of that, the query allows
        for filtering based on process variables. The <literal>variables</literal> property is a json-array containing objects with the format <link linkend="restQueryVariable"> as described here.</link>
      </para>
      <para>
        <table>
            <title>Query for historic variable instances - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示请求成功，并返回任务。</entry>
                </row>
                 <row>
                  <entry>400</entry>
                  <entry>Indicates an parameter was passed in the wrong format. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "14",
      "processInstanceId" : "5",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5",
      "taskId" : "6",
      "variable" : {
        "name" : "myVariable",
        "variableScope", "global",
        "value" : "test"
      }
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>Get the binary data for a historic task instance variable</title>
      <para>
        <programlisting>GET history/historic-variable-instances/{varInstanceId}/data</programlisting>
      </para>
      <para>
        <table>
            <title>Get the binary data for a historic task instance variable - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates the variable instance was found and the requested variable data is returned.</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>Indicates the requested variable instance was not found or the variable instance doesn't have a variable with the given name or the variable doesn't have a binary stream available. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
      <emphasis role="bold">成功响应体：</emphasis>
      The response body contains the binary value of the variable. When the variable is of type <literal>binary</literal>, the content-type of the response is set to <literal>application/octet-stream</literal>, regardless of the content of the variable or the request accept-type header. In case of <literal>serializable</literal>, <literal>application/x-java-serialized-object</literal> is used as content-type.
    </para>
  </section>
    <section id="restHistoricDetailGet">
    <title>Get historic detail</title>
      <para>
        <programlisting>GET history/historic-detail</programlisting>
      </para>
      <para>
          <table>
            <title>Get historic detail - URL参数</title>
            <tgroup cols='4'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>id</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The id of the historic detail.</entry>
                </row>
                <row>
                  <entry>processInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The process instance id of the historic detail.</entry>
                </row>
                <row>
                  <entry>executionId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The execution id of the historic detail.</entry>
                </row>
                <row>
                  <entry>activityInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The activity instance id of the historic detail.</entry>
                </row>
                <row>
                  <entry>taskId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>The task id of the historic detail.</entry>
                </row>
                <row>
                  <entry>selectOnlyFormProperties</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>Indication to only return form properties in the result.</entry>
                </row>
                <row>
                  <entry>selectOnlyVariableUpdates</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>Indication to only return variable updates in the result.</entry>
                </row>
                <row>
                  <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>Get historic detail - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates that historic detail could be queried.</entry>
                </row>
                <row>
                  <entry>400</entry>
                  <entry>Indicates an parameter was passed in the wrong format. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "26",
      "processInstanceId" : "5",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5",
      "executionId" : "6",
      "activityInstanceId", "10",
      "taskId" : "6",
      "taskUrl" : "http://localhost:8182/history/historic-task-instances/6",
      "time" : "2013-04-17T10:17:43.902+0000",
      "detailType" : "variableUpdate",
      "revision" : 2,
      "variable" : {
        "name" : "myVariable",
        "variableScope", "global",
        "value" : "test"
      },
      "propertyId", null,
      "propertyValue", null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>Query for historic details</title>
      <para>
        <programlisting>POST query/historic-detail</programlisting>
      </para>
      <para>
        <emphasis role="bold">请求体：</emphasis>
        <programlisting>
{
  "processInstanceId" : "5",
}</programlisting>
      </para>
      <para>
        All supported JSON parameter fields allowed are exactly the same as the parameters found for <link linkend="restHistoricDetailGet">getting a collection of historic process instances</link>, but passed in as JSON-body arguments rather than URL-parameters to allow for more advanced querying and preventing errors with request-uri's that are too long.
      </para>
      <para>
        <table>
            <title>Query for historic details - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates request was successful and the historic details are returned</entry>
                </row>
                 <row>
                  <entry>400</entry>
                  <entry>Indicates an parameter was passed in the wrong format. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "26",
      "processInstanceId" : "5",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5",
      "executionId" : "6",
      "activityInstanceId", "10",
      "taskId" : "6",
      "taskUrl" : "http://localhost:8182/history/historic-task-instances/6",
      "time" : "2013-04-17T10:17:43.902+0000",
      "detailType" : "variableUpdate",
      "revision" : 2,
      "variable" : {
        "name" : "myVariable",
        "variableScope", "global",
        "value" : "test"
      },
      "propertyId", null,
      "propertyValue", null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>Get the binary data for a historic detail variable</title>
      <para>
        <programlisting>GET history/historic-detail/{detailId}/data</programlisting>
      </para>
      <para>
        <table>
            <title>Get the binary data for a historic detail variable - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates the historic detail instance was found and the requested variable data is returned.</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>Indicates the requested historic detail instance was not found or the historic detail instance doesn't have a variable with the given name or the variable doesn't have a binary stream available. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
        The response body contains the binary value of the variable. When the variable is of type <literal>binary</literal>, the content-type of the response is set to <literal>application/octet-stream</literal>, regardless of the content of the variable or the request accept-type header. In case of <literal>serializable</literal>, <literal>application/x-java-serialized-object</literal> is used as content-type.
      </para>
    </section>
  </section>
  <section>
    <title>Forms</title>
    <section>
      <title>Get form data</title>
      <para>
        <programlisting>GET form/form-data</programlisting>
      </para>
      <para>
          <table>
            <title>Get form data - URL参数</title>
            <tgroup cols='4'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>taskId</entry>
                  <entry>Yes (if no processDefinitionId)</entry>
                  <entry>String</entry>
                  <entry>The task id corresponding to the form data that needs to be retrieved.</entry>
                </row>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>Yes (if no taskId)</entry>
                  <entry>String</entry>
                  <entry>The process definition id corresponding to the start event form data that needs to be retrieved.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>Get form data - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates that form data could be queried.</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>Indicates that form data could not be found.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "formKey" : null,
      "deploymentId" : "2",
      "processDefinitionId" : "3",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definition/3",
      "taskId" : "6",
      "taskUrl" : "http://localhost:8182/runtime/task/6",
      "formProperties" : [
        {
          "id" : "room",
          "name" : "Room",
          "type" : "string",
          "value" : null,
          "readable" : true,
          "writable" : true,
          "required" : true,
          "datePattern" : null,
          "enumValues" : [
            {
              "id" : "normal",
              "name" : "Normal bed"
            },
            {
              "id" : "kingsize",
              "name" : "Kingsize bed"
            },
          ]
        }
      ]
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>Submit task form data</title>
      <para>
        <programlisting>POST form/form-data</programlisting>
      </para>
      <para>
        <emphasis role="bold">Request body for task form:</emphasis>
        <programlisting>
{
  "taskId" : "5",
  "properties" : [
    {
      "id" : "room",
      "value" : "normal"
    }
  ]
}</programlisting>
      </para>
      <para>
        <emphasis role="bold">Request body for start event form:</emphasis>
        <programlisting>
{
  "processDefinitionId" : "5",
  "businessKey" : "myKey", (optional)
  "properties" : [
    {
      "id" : "room",
      "value" : "normal"
    }
  ]
}</programlisting>
      </para>
      <para>
        <table>
            <title>Submit task form data - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates request was successful and the form data was submitted</entry>
                </row>
                 <row>
                  <entry>400</entry>
                  <entry>Indicates an parameter was passed in the wrong format. 状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">Success response body for start event form data (no response for task form data):</emphasis>
          <programlisting>
{
  "id" : "5",
  "url" : "http://localhost:8182/history/historic-process-instances/5",
  "businessKey" : "myKey",
  "suspended", false,
  "processDefinitionId" : "3",
  "processDefinitionUrl" : "http://localhost:8182/repository/process-definition/3",
  "activityId" : "myTask"
}</programlisting>
      </para>
    </section>
  </section>
  <section>
    <title>Database tables</title>
    <section>
      <title>List of tables</title>
      <para>
        <programlisting>GET management/tables</programlisting>
      </para>
      <para>
        <table>
            <title>List of tables - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>Indicates the request was successful.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "name":"ACT_RU_VARIABLE",
      "url":"http://localhost:8182/management/tables/ACT_RU_VARIABLE",
      "count":4528
   },
   {
      "name":"ACT_RU_EVENT_SUBSCR",
      "url":"http://localhost:8182/management/tables/ACT_RU_EVENT_SUBSCR",
      "count":3
   },

   ...

]</programlisting>
    </para>
    </section>

    <section>
      <title>Get a single table</title>
        <para>
          <programlisting>GET management/tables/{tableName}</programlisting>
        </para>
        <para>
            <table>
              <title>Get a single table - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>tableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>The name of the table to get.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
      "name":"ACT_RE_PROCDEF",
      "url":"http://localhost:8182/management/tables/ACT_RE_PROCDEF",
      "count":60
}</programlisting>
          <table>
              <title>Get a single table - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the table exists and the table count is returned.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested table does not exist.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
    <section>
      <title>Get column info for a single table</title>
        <para>
          <programlisting>GET management/tables/{tableName}/columns</programlisting>
        </para>
        <para>
            <table>
              <title>Get column info for a single table - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>tableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>The name of the table to get.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "tableName":"ACT_RU_VARIABLE",
   "columnNames":[
      "ID_",
      "REV_",
      "TYPE_",
      "NAME_",
      ...
   ],
   "columnTypes":[
      "VARCHAR",
      "INTEGER",
      "VARCHAR",
      "VARCHAR",
      ...
   ]
}</programlisting>
          <table>
              <title>Get column info for a single table - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the table exists and the table column info is returned.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested table does not exist.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>Get row data for a single table</title>
        <para>
          <programlisting>GET management/tables/{tableName}/data</programlisting>
        </para>
        <para>
            <table>
              <title>Get row data for a single table - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>tableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>The name of the table to get.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
            <table>
              <title>Get row data for a single table - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>start</entry>
                    <entry>否</entry>
                    <entry>Integer</entry>
                    <entry>Index of the first row to fetch. Defaults to 0.</entry>
                  </row>
                  <row>
                    <entry>size</entry>
                    <entry>否</entry>
                    <entry>Integer</entry>
                    <entry>Number of rows to fetch, starting from <literal>start</literal>. Defaults to 10.</entry>
                  </row>
                  <row>
                    <entry>orderAscendingColumn</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>Name of the column to sort the resulting rows on, ascending.</entry>
                  </row>
                  <row>
                    <entry>orderDescendingColumn</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>Name of the column to sort the resulting rows on, descending.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "total":3,
   "start":0,
   "sort":null,
   "order":null,
   "size":3,

   "data":[
      {
         "TASK_ID_":"2",
         "NAME_":"var1",
         "REV_":1,
         "TEXT_":"123",
         "LONG_":123,
         "ID_":"3",
         "TYPE_":"integer"
      },
      ...
   ]

}</programlisting>
          <table>
              <title>Get row data for a single table - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the table exists and the table row data is returned.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested table does not exist.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

</section>


<section>
    <title>Engine</title>
    <section>
      <title>Get engine properties</title>
        <para>
          <programlisting>GET management/properties</programlisting>
        </para>
        <para>
        Returns a read-only view of the properties used internally in the engine.
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "next.dbid":"101",
   "schema.history":"create(5.13)",
   "schema.version":"5.13"
}</programlisting>
          <table>
              <title>Get engine properties - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the properties are returned.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>Get engine info</title>
        <para>
          <programlisting>GET management/engine</programlisting>
        </para>
        <para>
        Returns a read-only view of the engine that is used in this REST-service.
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "name":"default",
   "version":"5.13",
   "resourceUrl":"file://activiti/activiti.cfg.xml",
   "exception":null
}</programlisting>
          <table>
              <title>Get engine info - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the engine info is returned.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
 </section>


<section>
    <title>Jobs</title>
    <section>
      <title>Get a single job</title>
        <para>
          <programlisting>GET management/jobs/{jobId}</programlisting>
        </para>
        <para>
            <table>
              <title>Get a single job - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>jobId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>The id of the job to get.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"8",
   "url":"http://localhost:8182/management/jobs/8",
   "processInstanceId":"5",
   "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
   "processDefinitionId":"timerProcess:1:4",
   "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/timerProcess%3A1%3A4",
   "executionId":"7",
   "executionUrl":"http://localhost:8182/runtime/executions/7",
   "retries":3,
   "exceptionMessage":null,
   "dueDate":"2013-06-04T22:05:05.474+0000"
}</programlisting>
          <table>
              <title>Get a single job - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the job exists and is returned.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested job does not exist.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>Delete a job</title>
        <para>
          <programlisting>DELETE management/jobs/{jobId}</programlisting>
        </para>
        <para>
            <table>
              <title>Delete a job - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>jobId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>The id of the job to delete.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>Delete a job - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>Indicates the job was found and has been deleted. 响应体为空。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>Indicates the requested job was not found.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>Execute a single job</title>
        <para>
          <programlisting>PUT management/jobs/{jobId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
  "action" : "execute"
}</programlisting>
        <table>
              <title>Execute a single job - 请求的JSON参数</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>Parameter</entry>
                    <entry>Description</entry>
                    <entry>Required</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>action</entry>
                    <entry>Action to perform. Only <literal>execute</literal> is supported.</entry>
                    <entry>是</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>Execute a single job - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>Indicates the job was executed. 响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested job was not found.</entry>
                  </row>
                  <row>
                    <entry>500</entry>
                    <entry>Indicates the an exception occured while executing the job. The status-description contains additional detail about the error. The full error-stacktrace can be fetched later on if needed.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
 </section>

 <section>
      <title>Get the exception stacktrace for a job</title>
        <para>
          <programlisting>GET management/jobs/{jobId}/exception-stracktrace</programlisting>
        </para>
        <para>
        <table>
              <title>Get the exception stacktrace for a job - URL参数</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>Parameter</entry>
                    <entry>Description</entry>
                    <entry>Required</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>jobId</entry>
                    <entry>Id of the job to get the stacktrace for.</entry>
                    <entry>是</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>Get the exception stacktrace for a job - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the requested job was not found and the stacktrace has been returned. The response contains the raw stacktrace and always has a Content-type of <literal>text/plain</literal>.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested job was not found or the job doesn't have an exception stacktrace. Status-description contains additional information about the error.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
 </section>

 <section>
      <title>Get a list of jobs</title>
        <para>
          <programlisting>GET management/jobs</programlisting>
        </para>
        <para>
        <table>
              <title>Get a list of jobs - URL参数</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>Parameter</entry>
                    <entry>Description</entry>
                    <entry>Type</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>id</entry>
                    <entry>Only return job with the given id</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>Only return jobs part of a process with the given id</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>executionId</entry>
                    <entry>Only return jobs part of an execution with the given id</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>Only return jobs with the given process definition id</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>withRetriesLeft</entry>
                    <entry>If <literal>true</literal>, only return jobs with retries left. If false, this parameter is ignored.</entry>
                    <entry>Boolean</entry>
                  </row>
                  <row>
                    <entry>executable</entry>
                    <entry>If <literal>true</literal>, only return jobs which are executable. If false, this parameter is ignored.</entry>
                    <entry>Boolean</entry>
                  </row>
                  <row>
                    <entry>timersOnly</entry>
                    <entry>If <literal>true</literal>, only return jobs which are timers. If false, this parameter is ignored. Cannot be used toghether with <literal>'messagesOnly'</literal>.</entry>
                    <entry>Boolean</entry>
                  </row>
                  <row>
                    <entry>messagesOnly</entry>
                    <entry>If <literal>true</literal>, only return jobs which are messages. If false, this parameter is ignored. Cannot be used toghether with <literal>'timersOnly'</literal></entry>
                    <entry>Boolean</entry>
                  </row>
                  <row>
                    <entry>withException</entry>
                    <entry>If <literal>true</literal>, only return jobs for which an exception occured while executing it. If false, this parameter is ignored.</entry>
                    <entry>Boolean</entry>
                  </row>
                  <row>
                    <entry>dueBefore</entry>
                    <entry>Only return jobs which are due to be executed before the given date. Jobs without duedate are never returned using this parameter.</entry>
                    <entry>Date</entry>
                  </row>
                  <row>
                    <entry>dueAfter</entry>
                    <entry>Only return jobs which are due to be executed after the given date. Jobs without duedate are never returned using this parameter.</entry>
                    <entry>Date</entry>
                  </row>
                  <row>
                    <entry>exceptionMessage</entry>
                    <entry>Only return jobs with the given exception message</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>Field to sort results on, should be one of <literal>id</literal>, <literal>dueDate</literal>, <literal>executionId</literal>, <literal>processInstanceId</literal> or <literal>retries</literal>.</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c3"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "id":"13",
         "url":"http://localhost:8182/management/jobs/13",
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "processDefinitionId":"timerProcess:1:4",
         "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/timerProcess%3A1%3A4",
         "executionId":"12",
         "executionUrl":"http://localhost:8182/runtime/executions/12",
         "retries":0,
         "exceptionMessage":"Can't find scripting engine for 'unexistinglanguage'",
         "dueDate":"2013-06-07T10:00:24.653+0000"
      },

      ...
   ],
   "total":2,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":2
}</programlisting>
          <table>
              <title>Get a list of jobs - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the requested jobs were returned.</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>Indicates an illegal value has been used in a url query parameter or the both <literal>'messagesOnly'</literal> and <literal>'timersOnly'</literal> are used as parameters. Status description contains additional details about the error.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
 </section>

</section>

<section>
  <title>Users</title>

  <section>
      <title>Get a single user</title>
        <para>
          <programlisting>GET identity/users/{userId}</programlisting>
        </para>
        <para>
            <table>
              <title>Get a single user - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>userId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>The id of the user to get.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"testuser",
   "firstName":"Fred",
   "lastName":"McDonald",
   "url":"http://localhost:8182/identity/users/testuser",
   "email":"no-reply@activiti.org"
}</programlisting>
          <table>
              <title>Get a single user - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the user exists and is returned.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested user does not exist.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>Get a list of users</title>
        <para>
          <programlisting>GET identity/users</programlisting>
        </para>
        <para>
        <table>
              <title>Get a list of users - URL参数</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>Parameter</entry>
                    <entry>Description</entry>
                    <entry>Type</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>id</entry>
                    <entry>Only return user with the given id</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>firstName</entry>
                    <entry>Only return users with the given firstname</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>lastName</entry>
                    <entry>Only return users with the given lastname</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>email</entry>
                    <entry>Only return users with the given email</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>firstNameLike</entry>
                    <entry>Only return userswith a firstname like the given value. Use <literal>%</literal> as wildcard-character.</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>lastNameLike</entry>
                    <entry>Only return users with a lastname like the given value. Use <literal>%</literal> as wildcard-character.</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>emailLike</entry>
                    <entry>Only return users with an email like the given value. Use <literal>%</literal> as wildcard-character.</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>memberOfGroup</entry>
                    <entry>Only return users which are a member of the given group.</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>potentialStarter</entry>
                    <entry>Only return users which are potential starters for a process-definition with the given id.</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>Field to sort results on, should be one of <literal>id</literal>, <literal>firstName</literal>, <literal>lastname</literal> or <literal>email</literal>.</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c3"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "id":"anotherUser",
         "firstName":"Tijs",
         "lastName":"Barrez",
         "url":"http://localhost:8182/identity/users/anotherUser",
         "email":"no-reply@alfresco.org"
      },
      {
         "id":"kermit",
         "firstName":"Kermit",
         "lastName":"the Frog",
         "url":"http://localhost:8182/identity/users/kermit",
         "email":null
      },
      {
         "id":"testuser",
         "firstName":"Fred",
         "lastName":"McDonald",
         "url":"http://localhost:8182/identity/users/testuser",
         "email":"no-reply@activiti.org"
      }
   ],
   "total":3,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":3
}</programlisting>
          <table>
              <title>Get a list of users - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the requested users were returned.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
 </section>

  <section>
      <title>Update a user</title>
        <para>
          <programlisting>PUT identity/users/{userId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
  "firstName":"Tijs",
  "lastName":"Barrez",
  "email":"no-reply@alfresco.org"
}</programlisting>
      All request values are optional. For example, you can only include the 'firstName' attribute in the request body JSON-object, only updating the firstName of the user, leaving all other fields unaffected. When an attribute is explicitly included and is set to null, the user-value will be updated to null. Example: <literal>{"firstName" : null}</literal> will clear the firstName of the user).
       </para>
        <para>
          <table>
              <title>Update a user - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the user was updated.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested user was not found.</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>Indicates the requested user was updated simultaneously.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> see response for <literal>identity/users/{userId}</literal>.
      </para>
  </section>

   <section>
      <title>Create a user</title>
        <para>
          <programlisting>POST identity/users</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
  "id":"tijs",
  "firstName":"Tijs",
  "lastName":"Barrez",
  "email":"no-reply@alfresco.org"
}</programlisting>
       </para>
        <para>
          <table>
              <title>Create a user - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>Indicates the user was created.</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>Indicates the id of the user was missing.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> see response for <literal>identity/users/{userId}</literal>.
      </para>
  </section>

  <section>
      <title>Delete a user</title>
         <para>
        <programlisting>DELETE identity/users/{userId}</programlisting>
      </para>
      <para>
          <table>
            <title>Delete a user - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The id of the user to delete.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <table>
              <title>Delete a user - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>Indicates the user was found and  has been deleted. 响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested user was not found.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>Get a user's picture</title>
         <para>
        <programlisting>GET identity/users/{userId}/picture</programlisting>
      </para>
      <para>
          <table>
            <title>Get a user's picture - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The id of the user to get the pîcture for.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <emphasis role="bold">响应体：</emphasis>
          The response body contains the raw picture data, representing the user's picture. The Content-type of the response corresponds to the mimeType that was set when creating the picture.
          <table>
              <title>Get a user's picture - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the user was found and has a picture, which is returned in the body.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested user was not found or the user does not have a profile picture. Status-description contains additional information about the error.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>Updating a user's picture</title>
         <para>
        <programlisting>GET identity/users/{userId}/picture</programlisting>
      </para>
      <para>
          <table>
            <title>Updating a user's picture - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The id of the user to get the pîcture for.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
           The request should be of type <literal>multipart/form-data</literal>. There should be a single file-part included with the binary value of the picture. On top of that, the folowing additionl form-fields can be present:
        <itemizedlist>
            <listitem>
              <para><literal>mimeType</literal>: Optional mime-type for the uploaded picture. If omitted, the default of <literal>image/jpeg</literal> is used as a mime-type for the picture.</para>
            </listitem>
        </itemizedlist>
        </para>
        <para>
          <table>
              <title>Updating a user's picture - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the user was found and the picture has been updated. The response-body is left empty intentionally.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested user was not found.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>List a user's info</title>
         <para>
        <programlisting>PUT identity/users/{userId}/info</programlisting>
      </para>
      <para>
          <table>
            <title>List a user's info - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The id of the user to get the info for.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <emphasis role="bold">响应体：</emphasis>
<programlisting>
[
   {
      "key":"key1",
      "url":"http://localhost:8182/identity/users/testuser/info/key1"
   },
   {
      "key":"key2",
      "url":"http://localhost:8182/identity/users/testuser/info/key2"
   }
]</programlisting>
          <table>
              <title>List a user's info - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the user was found and list of info (key and url) is returned.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested user was not found.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>Get a user's info</title>
         <para>
        <programlisting>GET identity/users/{userId}/info/{key}</programlisting>
      </para>
      <para>
          <table>
            <title>Get a user's info - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The id of the user to get the info for.</entry>
                </row>
                <row>
                  <entry>key</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The key of the user info to get.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <emphasis role="bold">响应体：</emphasis>
<programlisting>
{
   "key":"key1",
   "value":"Value 1",
   "url":"http://localhost:8182/identity/users/testuser/info/key1"
}</programlisting>
          <table>
              <title>Get a user's info - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the user was found and the user has info for the given key..</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested user was not found or the user doesn't have info for the given key. 状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>Update a user's info</title>
         <para>
        <programlisting>PUT identity/users/{userId}/info/{key}</programlisting>
      </para>
      <para>
          <table>
            <title>Update a user's info - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The id of the user to update the info for.</entry>
                </row>
                <row>
                  <entry>key</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The key of the user info to update.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
       <para>
          <emphasis role="bold">请求体：</emphasis>
<programlisting>
{
   "value":"The updated value"
}</programlisting>
      </para>
        <para>
          <emphasis role="bold">响应体：</emphasis>
<programlisting>
{
   "key":"key1",
   "value":"The updated value",
   "url":"http://localhost:8182/identity/users/testuser/info/key1"
}</programlisting>
          <table>
              <title>Update a user's info - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the user was found and the info has been updated.</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>Indicates the value was missing from the request body.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested user was not found or the user doesn't have info for the given key. 状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

   <section>
      <title>Create a new user's info entry</title>
         <para>
        <programlisting>POST identity/users/{userId}/info</programlisting>
      </para>
      <para>
          <table>
            <title>Create a new user's info entry - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The id of the user to create the info for.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
       <para>
          <emphasis role="bold">请求体：</emphasis>
<programlisting>
{
   "key":"key1",
   "value":"The value"
}</programlisting>
      </para>
        <para>
          <emphasis role="bold">响应体：</emphasis>
<programlisting>
{
   "key":"key1",
   "value":"The value",
   "url":"http://localhost:8182/identity/users/testuser/info/key1"
}</programlisting>
          <table>
              <title>Create a new user's info entry - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>Indicates the user was found and the info has been created.</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>Indicates the key or value was missing from the request body. 状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested user was not found.</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>Indicates there is already an info-entry with the given key for the user, update the resource instance (<literal>PUT</literal>).</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>Delete a user's info</title>
         <para>
        <programlisting>DELETE identity/users/{userId}/info/{key}</programlisting>
      </para>
      <para>
          <table>
            <title>Delete a user's info - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The id of the user to delete the info for.</entry>
                </row>
                <row>
                  <entry>key</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The key of the user info to delete.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <table>
              <title>Delete a user's info - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>Indicates the user was found and the info for the given key has been deleted. 响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested user was not found or the user doesn't have info for the given key. 状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

</section>
<section>
  <title>Groups</title>
   <section>
      <title>Get a single group</title>
        <para>
          <programlisting>GET identity/groups/{groupId}</programlisting>
        </para>
        <para>
            <table>
              <title>Get a single group - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>groupId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>The id of the group to get.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"testgroup",
   "url":"http://localhost:8182/identity/groups/testgroup",
   "name":"Test group",
   "type":"Test type"
}</programlisting>
          <table>
              <title>Get a single group - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the group exists and is returned.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested group does not exist.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>Get a list of groups</title>
        <para>
          <programlisting>GET identity/groups</programlisting>
        </para>
        <para>
        <table>
              <title>Get a list of groups - URL参数</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>Parameter</entry>
                    <entry>Description</entry>
                    <entry>Type</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>id</entry>
                    <entry>Only return group with the given id</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>name</entry>
                    <entry>Only return groups with the given name</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>type</entry>
                    <entry>Only return groups with the given type</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>nameLike</entry>
                    <entry>Only return groups with a name like the given value. Use <literal>%</literal> as wildcard-character.</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>member</entry>
                    <entry>Only return groups which have a member with the given username.</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>potentialStarter</entry>
                    <entry>Only return groups which members are potential starters for a process-definition with the given id.</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>Field to sort results on, should be one of <literal>id</literal>, <literal>name</literal> or <literal>type</literal>.</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c3"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
     {
        "id":"testgroup",
        "url":"http://localhost:8182/identity/groups/testgroup",
        "name":"Test group",
        "type":"Test type"
     },

      ...
   ],
   "total":3,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":3
}</programlisting>
          <table>
              <title>Get a list of groups - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the requested groups were returned.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
 </section>

  <section>
      <title>Update a group</title>
        <para>
          <programlisting>PUT identity/groups/{groupId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
   "name":"Test group",
   "type":"Test type"
}</programlisting>
      All request values are optional. For example, you can only include the 'name' attribute in the request body JSON-object, only updating the name of the group, leaving all other fields unaffected. When an attribute is explicitly included and is set to null, the group-value will be updated to null.
       </para>
        <para>
          <table>
              <title>Update a group - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>Indicates the group was updated.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested group was not found.</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>Indicates the requested group was updated simultaneously.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> see response for <literal>identity/groups/{groupId}</literal>.
      </para>
  </section>

   <section>
      <title>Create a group</title>
        <para>
          <programlisting>POST identity/groups</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
   "id":"testgroup",
   "name":"Test group",
   "type":"Test type"
}</programlisting>
       </para>
        <para>
          <table>
              <title>Create a group - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>Indicates the group was created.</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>Indicates the id of the group was missing.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> see response for <literal>identity/groups/{groupId}</literal>.
      </para>
  </section>

  <section>
      <title>Delete a group</title>
         <para>
        <programlisting>DELETE identity/groups/{groupId}</programlisting>
      </para>
      <para>
          <table>
            <title>Delete a group - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>groupId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The id of the group to delete.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <table>
              <title>Delete a group - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>Indicates the group was found and  has been deleted. 响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested group was not found.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
    <title>Get members in a group</title>
    <para>There is no GET allowed on <literal>identity/groups/members</literal>. Use the <literal>identity/users?memberOfGroup=sales</literal> URL to get all users that are part of a particular group.</para>
  </section>
  <section>
      <title>Add a member to a group</title>
         <para>
        <programlisting>POST identity/groups/{groupId}/members</programlisting>
      </para>
      <para>
          <table>
            <title>Add a member to a group - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>groupId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The id of the group to add a member to.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
       <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
   "userId":"kermit"
}</programlisting>
       </para>
        <para>
          <table>
              <title>Add a member to a group - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>Indicates the group was found and the member has been added.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the userId was not included in the request body.</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested group was not found.</entry>
                  </row>
                   <row>
                    <entry>409</entry>
                    <entry>Indicates the requested user is already a member of the group.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
         <emphasis role="bold">响应体：</emphasis>
           <programlisting>
{
   "userId":"kermit",
   "groupId":"sales",
    "url":"http://localhost:8182/identity/groups/sales/members/kermit"
}</programlisting>
       </para>
  </section>
  <section>
      <title>Delete a member from a group</title>
         <para>
        <programlisting>DELETE identity/groups/{groupId}/members/{userId}</programlisting>
      </para>
      <para>
          <table>
            <title>Delete a member from a group - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>groupId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The id of the group to remove a member from.</entry>
                </row>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>The id of the user to remove.</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <table>
              <title>Delete a member from a group - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>Indicates the group was found and the member has been deleted. The 响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>Indicates the requested group was not found or that the user is not a member of the group. The 状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
         <emphasis role="bold">响应体：</emphasis>
           <programlisting>
{
   "userId":"kermit",
   "groupId":"sales",
    "url":"http://localhost:8182/identity/groups/sales/members/kermit"
}</programlisting>
       </para>
  </section>

</section>

<!-- Legacy -->
  <section>

    <title>Legacy REST - General Usage</title>
    <para><emphasis role="bold">The folowing section contains documentation of the Legacy REST-api, which has been deprecated since the 5.13 release. The REST-urls will not be removed in the future but will not be maintained. Any future additions and improvements will be done to the new REST API.</emphasis></para>
    <para>
      Activiti includes a REST API to the Activiti Engine that can be installed by deploying the activiti-rest.war file to a servlet container like Apache Tomcat.
      By default the Activiti Engine will connect to a standalone H2 database. You can change the database settings in the db.properties file in the WEB-INF/classes folder.
      The REST API uses JSON format (http://www.json.org) and is built upon the Restlet (http://www.restlet.org).
    </para>

    <para>
      Each REST API call has its individual authorization level and you must be logged in as a user to invoke a REST API
      call (except for the /login service). Authentication is done using Basic HTTP Authentication, so if you logged in as
      an admin (i.e. kermit) you should be able to perform all calls as described below.
    </para>

    <para>
      The API follows normal REST API conventions using GET for read operations, POST for creating objects, PUT for updating and
      performing operations on already created objects and finally DELETE for deleting objects. When performing a call
      that affects multiple objects POST is used on all such operations for consistency and making sure that an unlimited
      number of objects may be used. The reason for using POST is that the HTTP DELETE method doesn't implicitly allow
      request bodies and therefore, a call using DELETE, in theory, could get it's request body stripped out by a proxy.
      So to be certain this doesn't happen we use POST, even when PUT could have been used to update multiple objects,
      for consistency.
    </para>

    <para>
      All rest calls use a content type of "application/json" (except for upload requests which uses "multipart/form-data").
    </para>

    <para>
      The base URL for invoking a REST call is http://localhost:8080/activiti-rest/service/.
      So for example to list the process definitions in the engine point your browser to:
      http://localhost:8080/activiti-rest/service/process-definitions
    </para>

    <para>
      You may also use curl to run queries against the REST API, e.g.:
      <programlisting>curl --basic --user kermit:kermit http://localhost:8080/activiti-rest/service/tasks?assignee=kermit</programlisting>
    </para>

    <para>
      Please look below to see what REST API calls that currently are available.
      Please consider the "API" sections as a "one line hint" to what functionality of the core API that is used to implement the REST API call.
    </para>

  </section>

  <section>

    <!-- REPOSITORY -->

    <title>Repository</title>

    <section>
      <title>Upload Deployment</title>
      <para>
        Uploads and installs a deployment of format .bpmn20.xml, .bpmn, .bar or .zip using normal "html form upload"
        (enctype=multipart/form-data) in other words not a json-request. The deployment information is returned as a response if the deploy action succeeds.
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <emphasis role="bold">Request: </emphasis>
            <literal>POST /deployment</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">API: </emphasis>
            <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().createDeployment().name(fileName).deploymentBuilder.deploy()</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">响应：</emphasis>
            <programlisting>
{
  "id": "10",
  "name": "activiti-examples.bar",
  "deploymentTime": "2010-10-13T14:54:26.750+02:00",
  "category": "examples"
}</programlisting>
          </para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>Get Deployments</title>
      <para>
        Returns a paginated list deployments that can be sorted by "id", "name" or "deploymentTime".
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <emphasis role="bold">Request: </emphasis>
            <literal>GET /deployments?start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">API: </emphasis>
            <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().createDeploymentQuery().listPage()</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">响应：</emphasis>
            <programlisting>
{
  "data": [
    {
      "id": "10",
      "name": "activiti-examples.bar",
      "deploymentTime": "2010-10-13T14:54:26.750+02:00",
      "category": "examples"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
          </para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>Get Deployment Resources</title>
      <para>
        Returns all resources from the deployment.
        Example: /deployment/10/resources
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <emphasis role="bold">Request: </emphasis>
            <literal>GET /deployment/{deploymentId}/resources</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">API: </emphasis>
            <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().getDeploymentResourceNames(deploymentId)</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">响应：</emphasis>
            <programlisting>
{
  "id": "10",
  "name": "activiti-examples.bar",
  "deploymentTime": "2010-10-13T14:54:26.750+02:00",
  "category": "examples",
  "resources": ["resource1", "resource2"]
}</programlisting>
          </para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>Get Deployment Resource</title>
      <para>
        Returns a resource from the deployment.
        Example: /deployment/10/resource/org/activiti/examples/bpmn/usertask/FinancialReportProcess.bpmn20.xml
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <emphasis role="bold">Request: </emphasis>
            <literal>GET /deployment/{deploymentId}/resource/{resourceName}</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">API: </emphasis>
            <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().getResourceAsStream(deploymentId, resourceName)</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">响应：</emphasis>
            <programlisting>I.e a .bpmn20.xml file, an image or whatever type of file the deployment resource contained.</programlisting>
          </para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>Delete Deployment</title>
      <para>
        Deletes a deployment.
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <emphasis role="bold">Request: </emphasis>
            <literal>DELETE /deployment/{deploymentId}?cascade={cascade?}</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">API: </emphasis>
            <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().deleteDeployment(deploymentId)</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">响应：</emphasis>
            <programlisting>
{
  "success": true
}</programlisting>
          </para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>Delete Deployments</title>
      <para>
        Deletes multiple deployment.
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <emphasis role="bold">Request: </emphasis>
            <literal>POST /deployments/delete?cascade={cascade?}</literal>
            <programlisting>
{
"deploymentIds": [ "10", "11" ]
}</programlisting>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">API: </emphasis>
            <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().deleteDeployment(deploymentId)</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">响应：</emphasis>
            <programlisting>
{
  "success": true
}</programlisting>
          </para>
        </listitem>
      </itemizedlist>
    </section>

  </section>

  <!-- ENGINE -->

    <section>

      <title>Engine</title>

      <section>
        <title>Get Process Engine</title>
        <para>
          Returns the process engine initialization details. If something went wrong during startup, details
          about the error will be given in the "exception" attribute in the response.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request: </emphasis>
              <literal>GET /process-engine</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API: </emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "name": "default",
  "resourceUrl": "jar:file:\//&lt;path-to-deployment&gt;\/activiti-cfg.jar!\/activiti.properties",
  "exception": null,
  "version": "5.11"
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

    </section>

    <!-- PROCESSES -->

    <section>

      <title>Processes</title>

      <section>
        <title>List Process Definitions</title>
        <para>
          Returns details about the deployed process definitions that can be sorted by "id", "name", "version" or
          "deploymentId". The name of the BPMN2.0 XML process diagram is given in the "resourceName" attribute and can,
          in combination with the "deploymentId" attribute, be retrieved from the GET Deployment Resource REST API call
          above.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Paginated Request:</emphasis>
              <literal>GET /process-definitions?start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().createProcessDefinitionQuery().listPage()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">Paginated Response:</emphasis>
              <programlisting>
{
  "data": [
    {
      "id": "financialReport:1",
      "key": "financialReport",
      "version": 1,
      "name": "Monthly financial report",
      "resourceName": "org/activiti/examples/bpmn/usertask/FinancialReportProcess.bpmn20.xml",
      "diagramResourceName": "org/activiti/examples/bpmn/usertask/FinancialReportProcess.png",
      "deploymentId": "10",
      "startFormResourceKey": null,
      "isGraphicNotationDefined": true
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Get Process Definition Form Properties</title>
        <para>
          Returns a process definition's form properties.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>GET /process-definition/{processDefinitionId}/properties</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getFormService().getStartFormData(processDefinitionId)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
                "data": [
    {
      "id": "fullName",
      "name": "Full name",
      "value": "${name}",
      "type": "String",
      "required": false,
      "readable": true,
      "writeable": true
    }
  ]
              </programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Get Process Definition Form Resource</title>
        <para>
          Returns a process definition's form.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>GET /process-definition/{processDefinitionId}/form</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().getRenderedStartFormById(processDefinitionId)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>&lt;user-defined-response&gt;</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
          <title>Get Process Definition Diagram</title>
          <para>
          Returns a PNG diagram of the process definition if it's available.
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <emphasis role="bold">Request:</emphasis>
                <literal>GET /process-definition/{processDefinitionId}/diagram</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">API:</emphasis>
                <literal>repositoryService.getResourceAsStream(processDefinition.getDeploymentId(), processDefinition.getDiagramResourceName());</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">响应：</emphasis>
                <programlisting>Png diagram of the process definition.</programlisting>
              </para>
            </listitem>
          </itemizedlist>
      </section>

      <section>
        <title>Start Process Instance</title>
        <para>
          Creates a process instance based on a process definition and returns details about the newly created process instance.
          Additional variables (from a form) may be passed using the body object. In other words placing attributes
          next to the "processDefinitionId" attribute.
        </para>
        <para>
          Note that if a value is submitted as true (instead of "true") it will be treated as a
          Boolean even if no descriptor is used. The same is also valid for number, i.e., 123 will become an Integer
          but "123" will become a String (unless a descriptor is defined).
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>POST /process-instance</literal>
              <programlisting>
{
  "processDefinitionId":"financialReport:1:1700",
  "businessKey":"order-4711"
}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRuntimeService().startProcessInstanceById(processDefinitionId[, businessKey][, variables])</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "id": "217",
  "processDefinitionId": "financialReport:1:1700",
  "businessKey": "order-4711",
  "processInstanceId": "217"
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

        <section>
          <title>List Process Instances</title>
          <para>
            Returns details about the active process instances that can be sorted by "id", "startTime", "businessKey" or
            "processDefinitionId". You can filter instances by "processDefinitionId" and "businessKey".
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <emphasis role="bold">Paginated Request:</emphasis>
                <literal>GET /process-instances?start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}&amp;businessKey={businessKey}&amp;processDefinitionId={processDefinitionId}</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">API:</emphasis>
                <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getHistoryService().createHistoricProcessInstanceQuery().xxx.listPages()</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">Paginated Response:</emphasis>
                <programlisting>
  {
    "data": [
      {
        "id": "2",
        "processDefinitionId": "financialReport:1",
        "businessKey": "55",
        "startTime": "2010-10-13T14:54:26.750+02:00",
        "startUserId": "kermit"
      }
    ],
    "total": 1,
    "start": 0,
    "sort": "id",
    "order": "asc",
    "size": 1
  }</programlisting>
              </para>
            </listitem>
          </itemizedlist>
        </section>

        <section>
          <title>Get Process Instance Details</title>
          <para>
            Returns all details about a specific process instance. This can be a running or completed process instance.
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <emphasis role="bold">Request:</emphasis>
                <literal>GET /process-instance/{processInstanceId}</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">API:</emphasis>
                <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getHistoryService().createHistoricProcessInstanceQuery().processInstanceId(..).singleResult()</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">响应：</emphasis>
                <programlisting>
  {
    "id": "2",
    "processDefinitionId": "financialReport:1",
    "businessKey": "55",
    "startTime": "2010-10-13T14:54:26.750+02:00",
    "startActivityId": "startFinancialAnalysis",
    "startUserId": "kermit",
    "completed": false,
    "tasks": [
      {
        "taskId": "3",
        "taskName": "Analyze report",
        "owner": null,
        "assignee": "Kermit",
        "startTime": "2010-10-13T14:53:26.750+02:00",
        "completed": false
      }
    ],
    "activities": [
      {
        "activityId": "4",
        "activityName": "Get report",
        "activityType": "ServiceTask",
        "startTime": "2010-10-13T14:53:25.750+02:00",
        "completed": true,
        "startTime": "2010-10-13T14:53:25.950+02:00",
        "duration": 200
      }
    ],
    "variables": [
      {
        "variableName": "reportName",
        "variableValue": "classified.pdf",
      }
    ]
    "historyVariables": [
      {
        "variableName": "reportName",
        "variableValue": "classified.pdf",
        "variableType": "String",
        "revision": 1,
        "time": "2010-10-13T14:53:26.750+02:00"
      }
    ]

  }</programlisting>
              </para>
            </listitem>
          </itemizedlist>
        </section>

        <section>
            <title>Get Process Instance Diagram</title>
            <para>
            Returns a PNG diagram of process with highlighted active executions. Returns 404 if process definition does not contain DI information.
            </para>
            <itemizedlist>
              <listitem>
                <para>
                  <emphasis role="bold">Request:</emphasis>
                  <literal>GET /process-instance/{processInstanceId}/diagram</literal>
                </para>
              </listitem>
              <listitem>
                <para>
                  <emphasis role="bold">API:</emphasis>
                  <literal>ProcessDiagramGenerator.generateDiagram(pde, "png", getRuntimeService().getActiveActivityIds(processInstanceId));</literal>
                </para>
              </listitem>
              <listitem>
                <para>
                  <emphasis role="bold">响应：</emphasis>
                  <programlisting>Png diagram of process with highlighted active executions.</programlisting>
                </para>
              </listitem>
            </itemizedlist>
        </section>

        <section>
            <title>Get open tasks for a process instance</title>
            <para>
            Returns a list of open tasks for a running process instance
            </para>
            <itemizedlist>
              <listitem>
                <para>
                  <emphasis role="bold">Request:</emphasis>
                  <literal>GET /process-instance/{processInstanceId}/tasks</literal>
                </para>
              </listitem>
              <listitem>
                <para>
                  <emphasis role="bold">API:</emphasis>
                  <literal>taskService.createTaskQuery().processInstanceId(processInstanceId);</literal>
                </para>
              </listitem>
              <listitem>
            <para>
              <emphasis role="bold">Paginated Response:</emphasis>
              <programlisting>
{
  "data": [
    {
      "id": "127",
      "name": "Handle vacation request",
      "description": "Vacation request by Kermit",
      "delegationState": "pending",
      "dueDate": "2010-10-13T14:54:26.750+02:00",
      "priority": 50,
      "assignee": null,
      "executionId": "118",
      "formResourceKey": "org/activiti/examples/taskforms/approve.form",
      "owner": "Kermit",
      "parentTaskId": "120",
      "processDefinitionId": "financialReport:1",
      "processInstanceId": "123",
      "taskDefinitionKey": "125"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
         </itemizedlist>
        </section>
        <section>
            <title>Signal an activity (receive task) for a specific process instance</title>
            <para>
            Signals an activity execution (receive task).
            </para>
            <itemizedlist>
              <listitem>
                <para>
                  <emphasis role="bold">Request:</emphasis>
                  <literal>POST /process-instance/{processInstanceId}/signal</literal>
                  <programlisting>
{
  "activityId":"receiveTask",
  "variable1":"value",
  "variable2":"value"
}</programlisting>
                </para>
              </listitem>
              <listitem>
                <para>
                  <emphasis role="bold">API:</emphasis>
                  <literal>runtimeService.signal(execution.getId(), variables);</literal>
                </para>
              </listitem>
              <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
         </itemizedlist>
        </section>

        <section>
            <title>Trigger a signal for a specific process instance</title>
            <para>
            Sends a signal to a specific process instance, causing any subscribing signal event to fire. Additional variables may be passed in the body. If you don't want to set any variables, you may leave the body empty.
            </para>
            <itemizedlist>
              <listitem>
                <para>
                  <emphasis role="bold">Request:</emphasis>
                  <literal>POST /process-instance/{processInstanceId}/event/{signalName}</literal>
                  <programlisting>
{
  "variable1":"value",
  "variable2":"value"
}</programlisting>
                </para>
              </listitem>
              <listitem>
                <para>
                  <emphasis role="bold">API:</emphasis>
                  <literal>runtimeService.signalEventReceived(signalName, execution.getId()[, variables]);</literal>
                </para>
              </listitem>
              <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
         </itemizedlist>
        </section>

    </section>



    <!-- TASKS -->

    <section>

      <title>Tasks</title>

      <section>
        <title>Get Task Summary</title>
        <para>
          Returns a task summary for a specific user: The number of tasks assigned the user, how many unassigned tasks
          that the user may claim and how many unassigned tasks there are per group that the user is a member of.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>GET /tasks-summary?user={userId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createTaskQuery().xxx().count()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "assigned": {
    "total": 0
  },
  "unassigned": {
    "total": 1,
    "groups":
    {
      "accountancy": 1,
      "sales": 0,
      "engineering": 0,
      "management": 0
    }
  }
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>List Tasks</title>
        <para>
          Returns a paginated 任务列表 that can be sorted by: "id", "name", "description", "priority", "assignee",
          "executionId" or "processInstanceId". The list must be based on a user of a specific role: assignee
          (lists the tasks assigned to the user) or candidate (lists the tasks that the user may claim) or a candidate
          group (lists tasks that the members of the group may claim). If the task has a form it is given in the
          "formResourceKey" attribute. The form for a task can be retrieved from the GET Task Form REST API call.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Paginated Request:</emphasis>
              <literal>GET /tasks?[assignee={userId}|candidate={userId}|candidate-group={groupId}]&amp;start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">Example:</emphasis>
              <programlisting>curl --basic --user kermit:kermit http://localhost:8080/activiti-rest/service/tasks?assignee=kermit</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createTaskQuery().xxx().listPage()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">Paginated Response:</emphasis>
              <programlisting>
{
  "data": [
    {
      "id": "127",
      "name": "Handle vacation request",
      "description": "Vacation request by Kermit",
      "delegationState": "pending",
      "dueDate": "2010-10-13T14:54:26.750+02:00",
      "priority": 50,
      "assignee": null,
      "executionId": "118",
      "formResourceKey": "org/activiti/examples/taskforms/approve.form",
      "owner": "Kermit",
      "parentTaskId": "120",
      "processDefinitionId": "financialReport:1",
      "processInstanceId": "123",
      "taskDefinitionKey": "125"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Get Task</title>
        <para>
          Returns details about the task with the task id.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>GET /task/{taskId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createTaskQuery().taskId(taskId).singleResult()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
      "id": "127",
      "name": "Handle vacation request",
      "description": "Vacation request by Kermit",
      "delegationState": "pending",
      "dueDate": "2010-10-13T14:54:26.750+02:00",
      "priority": 50,
      "assignee": null,
      "executionId": "118",
      "formResourceKey": "org/activiti/examples/taskforms/approve.form",
      "owner": "Kermit",
      "parentTaskId": "120",
      "processDefinitionId": "financialReport:1",
      "processInstanceId": "123",
      "taskDefinitionKey": "125",
      "subTaskList": [
        {
          "id": "129",
          "name": "Analyze request",
          "description": "Analyze request",
          "delegationState": "pending",
          "dueDate": "2010-10-13T14:54:26.750+02:00",
          "priority": 50,
          "assignee": null,
          "executionId": "118",
          "owner": "Kermit",
          "parentTaskId": "127"
        }
      ],
      "identityLinkList" : [
        {
          "type": "candidate",
          "userId": "Fozzie",
          "groupId": null
        }
      ],
      "attachmentList" : [
        {
          "id": "130",
          "name": "vacation_request.xls",
          "description": "Vacation request",
          "type": "application/pdf",
          "url": null
        }
      ]
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Get Task Form</title>
        <para>
          Returns a task's form.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>GET /task/{taskId}/form</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().getRenderedTaskForm(taskId)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>&lt;user-defined-response&gt;</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Perform Task Operation</title>
        <para>
          Performs an operation (claim, unclaim, assign or complete) on a task.
          For the "complete" operation additional variables (from a form) may be passed in the body.
          To read more about additional variables from forms, visit the Start Process Instance section
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>PUT /task/{taskId}/[claim|unclaim|complete|assign]</literal>
              Claim and unclaim don't need a JSON body, but for complete you can provide a number of variables and for assign a userId field is required.
              An example body for the complete operation:
              <programlisting>
{
      "variableName1": "variableValue1",
      "variableName2": "variableValue2"
}</programlisting>
              An example body for the assign operation:
              <programlisting>
{
      "userId": "newAssignee"
}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().xxx(taskId ...)</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

	  <section>
        <title>List Form Properties</title>
        <para>
          Returns a list of properties of a form of a running task, which is defined by the process.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>GET /form/{taskId}/properties</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getFormService().getTaskFormData(taskId).getFormProperties()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "data": [
    {
      "id": "userName",
      "name": "User",
      "value": "foobar",
      "type": "string",
      "required": "true",
      "readable": "true",
      "writable": "true"
    }
]
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

    <section>
        <title>Add attachment to a task</title>
        <para>
          Add an attachment to a task instance
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>PUT /task/{taskId}/attachment</literal>
              <programlisting>{}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createAttachment(...)</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
        {
          "id": "130",
          "name": "vacation_request.xls",
          "description": "Vacation request",
          "type": "application/pdf",
          "url": null
        }</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
          <title>Get task attachment</title>
          <para>
          Returns the task attachment
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <emphasis role="bold">Request:</emphasis>
                <literal>GET /attachment/{attachmentId}</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">API:</emphasis>
                <literal>taskService.getAttachment(attachmentId);</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">响应：</emphasis>
                <programlisting>The attachment.</programlisting>
              </para>
            </listitem>
          </itemizedlist>
      </section>

    <section>
        <title>Add url to a task</title>
        <para>
          Add an url to a task instance
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>PUT /task/{taskId}/url</literal>
              <programlisting>{}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createAttachment(...)</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
        {
          "id": "130",
          "name": "google.com",
          "description": "Good search sitet",
          "type": null,
          "url": "http://www.google.com"
        }</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>
    </section>


    <!-- IDENTITY -->

    <section>

      <title>Identity</title>

      <section>
        <title>Login</title>
        <para>
          Authenticates a user. If user and password doesn't match a response with status 403 is returned.
          If authentication is successful, a response with status 200 is returned.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>POST /login</literal>
              <programlisting>
{
  "userId": "kermit",
  "password": "kermit"
}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().checkPassword(userId, password)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Get User</title>
        <para>
          Returns details about a user.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>GET /user/{userId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createUserQuery().userId(userId).singleResult();</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "id": "kermit",
  "firstName": "Kermit",
  "lastName": "the Frog",
  "email": "kermit@server.com"
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>List User's Groups</title>
        <para>
          Returns a paginated list groups belonging to a user that can be sort by "id", "name" or "type".
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Paginated Request:</emphasis>
              <literal>GET /user/{userId}/groups?start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().xxx(userId)</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">Paginated Response:</emphasis>
              <programlisting>
{
  data: [
    {
      "id": "admin",
      "name": "System administrator",
      "type": "security-role"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Search users</title>
        <para>
          Returns a list users from whom the first or last name corresponds to the search text.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Paginated Request:</emphasis>
              <literal>GET /users?searchText=ker</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createUserQuery().userFirstNameLike(searchText).list()</literal>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createUserQuery().userLastNameLike(searchText).list()</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  data: [
    {
      "id": "kermit",
      "firstName": "Kermit",
      "lastName": "the Frog",
      "email": "kermit@server.com"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Create user</title>
        <para>
          Creates a new user.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>PUT /user</literal>
              <programlisting>
{
  "id": "kermit",
  "firstName": "Kermit",
  "lastName": "the Frog",
  "email": "kermit@server.com",
  "password": "kermit"
}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().newUser();</literal>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().saveUser();</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Add user to groups</title>
        <para>
          Adds user to the groups posted to this REST service.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>POST /user/{userId}/groups</literal>
              <programlisting>
["management", "sales"]
</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>identityService().createMembership(userId, groupId);</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Remove user from group</title>
        <para>
          Removes user from a group.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>DELETE /user/{userId}/groups/{groupId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>identityService().deleteMembership(userId, groupId);</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
          <title>Get user picture</title>
          <para>
          Returns the task attachment
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <emphasis role="bold">Request:</emphasis>
                <literal>GET /user/{userId}/picture</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">API:</emphasis>
                <literal>identityService.getUserPicture(userId);</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">响应：</emphasis>
                <programlisting>The user picture.</programlisting>
              </para>
            </listitem>
          </itemizedlist>
      </section>

      <section>
        <title>Get Group</title>
        <para>
          Returns details about a group.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>GET /group/{groupId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createGroupQuery().groupId(groupId).singleResult();</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "id": "admin",
  "name": "System administrator",
  "type": "security-role"
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>List Group Users</title>
        <para>
          Returns details about a group's users that can be sorted by "id", "firstName", "lastName" or "email".
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Paginated Request:</emphasis>
              <literal>GET /group/{groupId}/users</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createUserQuery().memberOfGroup(groupId).list()</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">Paginated Response:</emphasis>
              <programlisting>
{
  data: [
    {
      "id": "kermit",
      "firstName": "Kermit",
      "lastName": "the Frog",
      "email": "kermit@server.com"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

    <section>
        <title>Search groups</title>
        <para>
          Returns a list of groups from whom the id or name corresponds to the search text.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Paginated Request:</emphasis>
              <literal>GET /groups?searchText=ad</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>identityService.createGroupQuery().list()</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  data: [
    {
      "id": "admin",
      "name": "System administrator",
      "type": "security-role"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

    <section>
        <title>Create group</title>
        <para>
          Creates a new group.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>PUT /group</literal>
              <programlisting>
{
  "id": "admin",
  "name": "System administrator",
  "type": "security-role"
}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>identityService.newGroup();</literal>
              <literal>identityService.saveGroup();</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Add users to a group</title>
        <para>
          Adds users to a group.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>POST /group/{groupId}/users</literal>
              <programlisting>
["kermit", "fozzie"]
</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>identityService().createMembership(userId, groupId);</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Remove user from group</title>
        <para>
          Removes user from a group.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>DELETE /group/{groupId}/users/{userId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>identityService().deleteMembership(userId, groupId);</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>
   </section>


    <!-- MANAGEMENT -->

    <section>

      <title>Management</title>

      <section>
        <title>List Jobs</title>
        <para>
          Returns a paginated list of jobs that can be sorted by "id", "process-instance-id", "execution-id",
          "due-date", "retries" or some custom arbitrary property id. The list can also be filtered by
          process instance id, due date or if the jobs have retries, are executable or only have messages or timers.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Paginated Request:</emphasis>
              <literal>GET /management/jobs?process-instance={processInstanceId?}&amp;with-retries-left={withRetriesLeft=false}&amp;executable={axecutable=false}&amp;only-timers={onlyTimers=false}&amp;only-messages={onlyMessage=false}&amp;duedate-lt={iso8601Date}&amp;duedate-ltoe={iso8601Date}&amp;duedate-ht={iso8601Date}&amp;duedate-htoe={iso8601Date}&amp;start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).createJobQuery().xxx().listPage()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">Paginated Response:</emphasis>
              <programlisting>
{
  "data": [
    {
      "id": "212",
      "executionId": "211",
      "retries": -1,
      "processInstanceId": "210",
      "dueDate": null,
      "assignee": null,
      "exceptionMessage": "Can\'t find scripting engine for \'groovy\'"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Get Job</title>
        <para>
          Returns details about a job.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>GET /management/job({jobId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).createJobQuery().id(jobId).singleResult()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "id": "212",
  "executionId": "211",
  "retries": -1,
  "processInstanceId": "210",
  "dueDate": null,
  "assignee": null,
  "exceptionMessage": "Can\'t find scripting engine for \'groovy\'",
  "stacktrace": "org.activiti.engine.ActivitiException: Can't find scripting engine for 'groovy'\n\tat ..."
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Execute Job</title>
        <para>
          Executes a job.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>PUT /management/job/{jobId}/execute</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().executeJob(jobId)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Execute Jobs</title>
        <para>
          Executes multiple job.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>POST /management/jobs/execute</literal>
              <programlisting>
{
  "jobIds": [ "212" ]
}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().executeJob(jobId)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>List Database Tables</title>
        <para>
          Returns meta data information about all database tables in the engine.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>GET /management/tables</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().getTableCount()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "data": [
    {
      "tableName": "ACT_GE_PROPERTY",
      "noOfResults": 2
    }
  ]
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>Get Table Meta Data</title>
        <para>
          Returns meta data about a database table.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Request:</emphasis>
              <literal>GET /management/table/{tableName}</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().getTableMetaData(tableName))</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "tableName": "ACT_GE_PROPERTY",
  "columnNames": ["REV_","NAME_","VALUE_"],
  "columnNames": ["class java.lang.Integer", "class java.lang.String", "class java.lang.String"]
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>


      <section>
        <title>Get Table Data</title>
        <para>
          Returns a paginated list of database table data.
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">Paginated Request:</emphasis>
              <literal>GET /management/table/{tableName}/data</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().createTablePageQuery().tableName(tableName).start(start).size(size).orderXXX(sort).singleResult();
              </literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">Paginated Response:</emphasis>
              <programlisting>
{
  "data": [
    {
      "NAME_": "schema.version",
      "REV_": "1",
      "VALUE_": "5.10"
    },
    {
      "NAME_": "next.dbid",
      "REV_": "4",
      "VALUE_": "310"
    }
  ],
  "total": 2,
  "start": 0,
  "sort": "NAME_",
  "order": "asc",
  "size": 2
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

    </section>

</chapter>
